{"version":3,"sources":["components/Landing/style/TopTrack.module.css","components/Search/style/AlbumTracklist.module.css","components/TopArtists/style/ArtistDetails.module.css","constants/app_cred.js","components/Login.jsx","hoc/withToast.jsx","components/Layout/Spinner.jsx","components/Landing/TopTrack.jsx","components/Landing/TopArtist.jsx","components/Landing/Chart.jsx","context/auth-context.jsx","components/Landing/Landing.jsx","components/Profile/Profile.jsx","components/Search/SearchForm.jsx","components/Search/SearchFilter.jsx","components/Search/SortOption.jsx","components/Search/ArtworkDisplay.jsx","components/Search/AlbumTracklist.jsx","components/Search/Backdrop.jsx","components/Search/Modal.jsx","components/Search/Search.jsx","components/Layout/Pagination.jsx","components/TopTracks/TracksDisplay.jsx","components/TopTracks/TrackControl.jsx","components/TopTracks/TrackList.jsx","components/TopTracks/TrackOption.jsx","components/TopTracks/TopTracks.jsx","components/TopArtists/ArtistDisplay.jsx","components/TopArtists/ArtistList.jsx","components/TopArtists/SelectedOption.jsx","components/TopArtists/ArtistDetails.jsx","components/TopArtists/Backdrop.jsx","components/TopArtists/Modal.jsx","components/TopArtists/TopArtists.jsx","components/Main.jsx","components/Navbar.jsx","components/App.jsx","index.js","components/Search/style/SearchFilter.module.css","components/Search/style/ArtworkDisplay.module.css","components/Search/style/Modal.module.css","components/TopTracks/style/TrackControl.module.css","components/TopTracks/style/TopTracks.module.css","components/TopArtists/style/Modal.module.css","components/TopArtists/style/TopArtists.module.css","img/react-logo.png","components/Layout/spinner.gif","components/Search/style/SearchForm.module.css","components/Search/style/Backdrop.module.css","components/Layout/style/Pagination.module.css","components/TopTracks/style/TracksDisplay.module.css","components/TopTracks/style/TrackList.module.css","components/TopArtists/style/ArtistList.module.css","components/TopArtists/style/Backdrop.module.css"],"names":["module","exports","client_id","redirect_url","scopes","Login","className","src","logo","alt","id","href","withToast","Component","props","toastFuncs","useToasts","spinnerStyle","width","position","left","top","transform","Spinner","spinner","style","TopTrack","top_track","image","name","artist","preview_url","uri","onclick","icon","classes","Clickables","onClick","action","type","value","TopArtist","top_artist","Artist","textDecoration","Chart","genres","valueArray","key","push","data","labels","Object","keys","datasets","label","backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","authContext","React","createContext","loggedIn","updateAuth","Landing","constructor","super","sortGenres","sortedGenres","sortedArray","sort","a","b","i","handleStop","e","checkEnded","document","getElementsByTagName","addEventListener","audios","len","length","target","pause","handleClick","player","audio_player","querySelectorAll","this","state","player_1","play","setState","prevState","player_2","token","sessionStorage","getItem","console","log","loading","isPlaying","favorite_genres","componentDidMount","history","location","hash","axios","get","params","time_range","limit","headers","res","artistId","items","country","res_topTrack","images","url","tracks","j","album","artists","addToast","response","status","error","message","appearance","autoDismiss","clear","context","componentWillUnmount","removeEventListener","render","contextType","AuthContext","withRouter","spotifyApi","SpotifyApi","Profile","window","indexOf","split","trim","profile_img","display_name","email","account_type","link","followers","setAccessToken","getMe","then","total","product","external_urls","spotify","alert","rel","SearchForm","onSearch","onChange","onSubmit","placeholder","SearchFilter","onchange","filter","track","data-toggle","data-target","aria-expanded","CardBody","htmlFor","checked","SortOption","selected","margin","ArtworkDisplay","albumList","onAlbumClick","header","isSelectOption","AlbumHeader","textAlign","marginBottom","AlbumDisplay","map","index","artwork","albumTracklist","tracklist","duration_s","release_date","displayModal","useState","preview","setPreview","currentTrack","setCurrentTrack","useEffect","handleSubmit","preventDefault","method","device_id","devices","open","AlbumTracklist","description","AlbumName","Math","floor","hours","minutes","displayDuration","controls","autoPlay","displayNowPlaying","TrackListContainer","string","playPreview","Backdrop","show","clicked","Modal2","children","hideModal","Modal","opacity","display","CloseButton","aria-hidden","Search","fetchData","inputFilter","q","searchText","trackList","albums","albumData","total_tracks","store","album_href","trackData","track_preview","track_href","popularity","getPreview","sortList","list","sortOption","Date","handleSearch","fetchTracklist","modalLoading","duration_ms","searchCompleted","handleAlbumClick","handleTrackClick","audio_src","handleOptionChange","option","sortedList","selected_option","handleCheckbox","persist","handlePlayingStatus","handleCloseModal","queryParams","loadSpinner","textTransform","loadAlbumList","loadTrackList","Pagination","totalTracks","tracksPerPage","paginate","pageNumber","ceil","page","TracksDisplay","indexOfFirstPage","currentTracks","start","songFocus","image_src","device","querySelector","autoplay","TrackOrder","TrackControl","TrackList","song","activeClass","event","number","currentPage","term","termHeader","substring","indexOfLastPage","slice","Fragment","fontWeight","TrackOption","TopTracks","storeTrackList","offset","trackArray","res_track","handleOption","ArtistDisplay","indexFirstOfPage","artist_list","ArtistList","artistPerPage","indexLastOfPage","current_artists","showModal","SelectedOption","myArtist","my_ArtistTracks","artistTopTracks","handlePlaySong","ArtistDetails","ArtistContainer","MyArtistList","TopArtists","fetchArtistList","storeArtistList","artistList","artistArray","fetchMyArtistTracks","clickedArtist","artistTracks","storeMyArtistTracks","fetchArtistTopTracks","myArtistDetails","forEach","storeArtistTopTracks","handleShowModal","handleHideModal","Main","Switch","Route","exact","path","component","useContext","NavLink","to","aria-controls","aria-label","activeClassName","spotifyLogoutWindow","setTimeout","close","App","received","authToken","setItem","Provider","isLogin","ReactDOM","basename","process","getElementById"],"mappings":"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","file":"static/js/main.0db5416f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"TopTrack\":\"TopTrack_TopTrack___hx-P\",\"Clickables\":\"TopTrack_Clickables__MGU5I\",\"Artist\":\"TopTrack_Artist__6HR9T\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"AlbumTracklist\":\"AlbumTracklist_AlbumTracklist__1B9DN\",\"description\":\"AlbumTracklist_description__QWBl6\",\"TrackListContainer\":\"AlbumTracklist_TrackListContainer__2ZgpM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ArtistDetails\":\"ArtistDetails_ArtistDetails__2iMRG\",\"ArtistContainer\":\"ArtistDetails_ArtistContainer__h-xoI\",\"MyArtistList\":\"ArtistDetails_MyArtistList__3Qo0Q\"};","export const client_id = \"54023f00676d404aa81cafd195a5b9f5\";\r\nexport const client_secret = \"bebea03561d34a19972489e5778d78ca\";\r\n\r\nconst mode = 'PROD';\r\nexport const redirect_url = mode === 'DEV' ? \r\n  'http://localhost:3000/' : \r\n  'https://elvinlkw.github.io/react-spotifly/'\r\n\r\nexport var scopes =\r\n  `user-read-private user-read-email user-library-read \r\n  user-top-read user-read-recently-played \r\n  user-read-currently-playing user-read-currently-playing \r\n  user-read-playback-state user-modify-playback-state\r\n  streaming`;\r\n  \r\nexport const loginURL = `https://accounts.spotify.com/en/authorize/?client_id=${client_id}&response_type=token&redirect_uri=${redirect_url}&scope=${scopes}`;\r\n","import React from 'react';\r\nimport './../style/Login.css';\r\nimport {client_id, scopes, redirect_url} from './../constants/app_cred.js';\r\nimport logo from '../img/react-logo.png';\r\n\r\nconst Login = () => {\r\n    return (\r\n        <div className=\"container-login\">\r\n            <img className=\"img-logo\" src={logo} alt=\"Cannot be loaded\"/>\r\n            <h1 id=\"react-app\">Spotifly</h1>\r\n            <h5>Step 1:- Click on the button below to sign in and authorize your account to use the app.</h5>\r\n            <h5>Step 2:- That's it!</h5>\r\n            <a href={`https://accounts.spotify.com/en/authorize/?client_id=${client_id}&response_type=token&redirect_uri=${redirect_url}&scope=${scopes}`}><button className=\"btn btn-success\"><span>Sign In !</span></button></a>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;","import { useToasts } from 'react-toast-notifications';\r\nimport React from 'react';\r\n\r\nfunction withToast(Component) {\r\n  return function WrappedComponent(props) {\r\n    const toastFuncs = useToasts()\r\n    return <Component {...props} {...toastFuncs} />;\r\n  }\r\n}\r\n\r\nexport default withToast;","import React, { Fragment } from 'react';\r\nimport spinner from '../Layout/spinner.gif';\r\n\r\nconst Spinner = () => {\r\n    return (\r\n        <Fragment>\r\n            <img src={spinner} alt=\"Loading...\" style={spinnerStyle}/>\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nconst spinnerStyle = {\r\n    width: '200px',\r\n    position: 'absolute',\r\n    left: '50%',\r\n    top: '50%',\r\n    transform: 'translate(-50%, -40%)'\r\n}\r\n\r\nexport default Spinner;","import React from 'react';\r\nimport classes from './style/TopTrack.module.css';\r\n\r\nconst TopTrack = ({ top_track: { image, name, artist, preview_url, uri }, onclick, icon }) => {\r\n  return (\r\n    <div className={`${classes.TopTrack} row`}>\r\n      <div className=\"col-md-6\">\r\n        <h1 className=\"text-center\">Top Track</h1>\r\n        <img src={image} alt=\"No Artwork Found\"/>\r\n      </div>\r\n      <div className=\"col-md-4\">\r\n        <h4>{name}</h4>\r\n        <h6>{`By ${artist}`}</h6>\r\n        <audio src={preview_url}></audio>\r\n        <div className={classes.Clickables}>\r\n          <i id=\"track\" className={`fa fa-${icon ? 'play' : 'pause'}-circle-o fa-2x`} onClick={() => onclick(0)}></i>\r\n          <form action={uri}>\r\n            <input type=\"submit\" className=\"btn btn-success\" value=\"Spotify\"/>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TopTrack\r\n","import React from 'react';\r\nimport classes from './style/TopTrack.module.css';\r\n\r\nconst TopArtist = ({ top_artist: { image, name, top_track, preview_url, uri }, onclick, icon }) => {\r\n  return (\r\n    <div className={`${classes.TopTrack} ${classes.Artist} row`}>\r\n      <div className=\"col-md-6\">\r\n        <h4>{name}</h4>\r\n        <h6 style={{textDecoration: 'underline'}}>{`${name} - ${top_track}`}</h6>\r\n        <audio src={preview_url}></audio>\r\n        <div className={classes.Clickables}>\r\n          <i id=\"artist\" className={`fa fa-${icon ? 'play' : 'pause'}-circle-o fa-2x`} onClick={() => onclick(1)}></i>\r\n          <form action={uri}>\r\n            <input type=\"submit\" className=\"btn btn-success\" value=\"Spotify\"/>\r\n          </form>\r\n        </div>\r\n      </div>\r\n      <div className=\"col-md-6\">\r\n        <h1 className=\"text-center\">Top Artist</h1>\r\n        <img src={image} alt=\"No Artwork Found\"/>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TopArtist;\r\n","import React from 'react';\r\nimport { HorizontalBar } from 'react-chartjs-2';\r\n\r\nconst Chart = ({ genres }) => {\r\n  \r\n  let valueArray = [];\r\n  for( let key in genres){\r\n    valueArray.push(genres[key]);\r\n  }\r\n\r\n  const data = {\r\n    labels: Object.keys(genres),\r\n    datasets: [\r\n      {\r\n        label: '% Genre',\r\n        backgroundColor: '#36A2EB',\r\n        borderColor: '#4BC0C0',\r\n        borderWidth: 1,\r\n        hoverBackgroundColor: '#71B37C',\r\n        hoverBorderColor: '#36A2EB',\r\n        data: valueArray\r\n      }\r\n    ]\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1 className=\"text-center\">Top Genres</h1>\r\n      <HorizontalBar data={data} />\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default Chart\r\n","import React from 'react';\r\n\r\nconst authContext = React.createContext({ \r\n  loggedIn: false,\r\n  updateAuth: () => {}\r\n});\r\n\r\nexport default authContext;","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport withToast from '../../hoc/withToast';\r\nimport Spinner from '../Layout/Spinner';\r\nimport TopTrack from './TopTrack';\r\nimport TopArtist from './TopArtist';\r\nimport Chart from './Chart';\r\nimport AuthContext from '../../context/auth-context';\r\n\r\nclass Landing extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.token = sessionStorage.getItem('token');\r\n    console.log(this.token);\r\n    this.state = {\r\n      loading: true,\r\n      isPlaying: true,\r\n      favorite_genres: {},\r\n      top_artist: {},\r\n      top_track: {},\r\n      player_1: true,\r\n      player_2: true,\r\n    }\r\n  }\r\n  static contextType = AuthContext;\r\n  async componentDidMount(){\r\n    if(this.props.history.location.hash.length > 0){\r\n      this.props.history.push('/react-spotifly/');\r\n    }\r\n\r\n    document.addEventListener('play', this.handleStop ,true);\r\n    try{\r\n      // Fetching for Top Artist and Artist Top Track\r\n      let res = await axios.get('https://api.spotify.com/v1/me/top/artists', {\r\n        params: {\r\n          time_range: 'long_term',\r\n          limit: 50\r\n        },\r\n        headers: { 'Authorization': `Bearer ${this.token}` }\r\n      });\r\n      const artistId = res.data.items[0].id;\r\n      const res_topTrack = await axios.get(`https://api.spotify.com/v1/artists/${artistId}/top-tracks`, {\r\n        params: { country: 'US' },\r\n        headers: { 'Authorization': `Bearer ${this.token}` }\r\n      });\r\n\r\n      // Storing Favorite Artist\r\n      let data = res.data.items[0];\r\n      const top_artist = {\r\n        id: data.id,\r\n        name: data.name,\r\n        image: data.images[1].url,\r\n        uri: data.uri,\r\n        top_track: res_topTrack.data.tracks[0].name,\r\n        preview_url: res_topTrack.data.tracks[0].preview_url\r\n      }\r\n      // Storing Genres of artist\r\n      const items = res.data.items;\r\n      let genres = {};\r\n      for(let i = 0; i < items.length; i++) {\r\n        for(let j = 0; j < items[i].genres.length; j++){\r\n          // create an object with count of favorite genres\r\n          if(genres[items[i].genres[j]]){\r\n            genres[items[i].genres[j]] += 1\r\n          } else {\r\n            genres[items[i].genres[j]] = 1;\r\n          }\r\n        }\r\n      }\r\n      const sortedArray = this.sortGenres(genres);\r\n      \r\n      // Fetch Top Tracks for user\r\n      res = await axios.get('https://api.spotify.com/v1/me/top/tracks', {\r\n        params: {\r\n          time_range: 'long_term',\r\n          limit: 1\r\n        },\r\n        headers: { 'Authorization': `Bearer ${this.token}` }\r\n      });\r\n      // Storing Favorite Track\r\n      data = res.data.items[0];\r\n      const top_track = {\r\n        id: data.id,\r\n        name: data.name,\r\n        uri: data.uri,\r\n        image: data.album.images[0].url,\r\n        preview_url: data.preview_url,\r\n        artist: data.artists[0].name\r\n      }\r\n\r\n      this.setState({\r\n        top_artist,\r\n        top_track,\r\n        loading: false,\r\n        favorite_genres: sortedArray\r\n      });\r\n    } catch(error) {\r\n      this.props.addToast(`${error.response.status}: ${error.response.data ? error.response.data.error.message : 'Error Encountered'}`, {\r\n        appearance: 'error',\r\n        autoDismiss: true\r\n      });\r\n      if(error.response.status === 401){\r\n        sessionStorage.clear();\r\n        this.context.updateAuth(false);\r\n\t\t\t}\r\n    }\r\n  }\r\n  componentWillUnmount(){\r\n    document.removeEventListener('play' , this.handleStop, true);\r\n  }\r\n  sortGenres = (genres) => {\r\n    let sortedGenres = {};\r\n    let sortedArray = [];\r\n    // Create an array with object keys and values for sorting\r\n    for (let key in genres){\r\n        sortedArray.push([key, genres[key]]);\r\n    }\r\n    // Sort Array in descending order\r\n    sortedArray.sort((a, b) => {\r\n        return b[1] - a[1];\r\n    });\r\n    // Push information into a sorted object\r\n    for(let i = 0; i < 20; i++){\r\n      sortedGenres[sortedArray[i][0]] = sortedArray[i][1];\r\n    }\r\n    return sortedGenres;\r\n  }\r\n  handleStop = (e) => {\r\n    var checkEnded = (i)=>{\r\n      document.getElementsByTagName('audio')[i].addEventListener('ended', ()=>{\r\n          document.getElementsByTagName('i')[i].className = 'fa fa-play-circle-o fa-2x';\r\n      })\r\n    }\r\n    var audios = document.getElementsByTagName('audio');\r\n    for(var i = 0, len = audios.length; i < len;i++){\r\n        checkEnded(i);\r\n        if(audios[i] !== e.target){\r\n            audios[i].pause();\r\n            document.getElementsByTagName('i')[i].className = 'fa fa-play-circle-o fa-2x';\r\n        }\r\n    }\r\n  }\r\n  handleClick = (player) => {\r\n    const audio_player = document.querySelectorAll('audio');\r\n    if(player === 0){\r\n      if(this.state.player_1){\r\n        audio_player[player].play();\r\n        audio_player[1].pause();\r\n      } else {\r\n        audio_player[player].pause();\r\n      }\r\n      this.setState(prevState => ({ \r\n        player_1: !prevState.player_1,\r\n        player_2: true \r\n      }));\r\n    } else {\r\n      if(this.state.player_2){\r\n        audio_player[player].play();\r\n        audio_player[0].pause();\r\n      } else {\r\n        audio_player[player].pause();\r\n      }\r\n      this.setState(prevState => ({\r\n        player_1: true,\r\n        player_2: !prevState.player_2 \r\n      }));\r\n    }\r\n  }\r\n  // playTopTrack = async (e) => {\r\n  //   e.preventDefault();\r\n  //   try {\r\n  //     const res = await axios({\r\n  //       method: 'GET',\r\n  //       url: 'https://api.spotify.com/v1/me/player/devices',\r\n  //       headers: { 'Authorization': `Bearer ${this.token}` }\r\n  //     });\r\n\r\n  //     console.log(res);\r\n  //     const device_id = res.data.devices[0].id;\r\n  //     console.log(device_id);\r\n\r\n  //     await axios({\r\n  //       method: 'PUT',\r\n  //       url: 'https://api.spotify.com/v1/me/player/play',\r\n  //       params: { 'device_id' : device_id },\r\n  //       data: { 'uris' : [this.state.top_track.uri] },\r\n  //       headers: { 'Authorization': `Bearer ${this.token}` }\r\n  //     });\r\n  //   } catch (error) {\r\n  //     console.log(error.response);\r\n  //     this.props.addToast(`${error.response.status}: ${error.response.data ? error.response.data.error.message : 'Error Encountered'}`, {\r\n  //       appearance: 'error',\r\n  //       autoDismiss: true\r\n  //     });\r\n  //   }\r\n  // }\r\n  render() {\r\n    const {\r\n      loading,\r\n      top_track,\r\n      top_artist,\r\n      player_1,\r\n      player_2,\r\n      favorite_genres\r\n    } = this.state;\r\n\r\n    if( loading ) return <Spinner />\r\n    \r\n    return (\r\n      <div className=\"container\">\r\n        <TopTrack top_track={top_track} onclick={this.handleClick} icon={player_1}/>\r\n        {/* <button className=\"btn btn-success\" onClick={this.playTopTrack}>Play</button> */}\r\n        <TopArtist top_artist={top_artist} onclick={this.handleClick} icon={player_2}/>\r\n        <Chart genres={favorite_genres} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(withToast(Landing));\r\n","import React, { Component } from 'react';\r\nimport SpotifyApi from 'spotify-web-api-js';\r\nimport './../../style/Profile.css';\r\n\r\nconst spotifyApi = new SpotifyApi();\r\n\r\nclass Profile extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        let url = window.location.href;\r\n        if(url.indexOf(\"token=\") > -1){ \r\n            var token = url.split(\"token=\")[1].split(\"&\")[0].trim();\r\n        }\r\n        this.state = {\r\n            profile_img: '',\r\n            country: '',\r\n            display_name: '',\r\n            email: '',\r\n            id: '',\r\n            account_type: '',\r\n            link: '',\r\n            followers: 0\r\n        }\r\n        spotifyApi.setAccessToken(token);\r\n    }\r\n    componentDidMount(){\r\n        spotifyApi.getMe().then((res)=>{\r\n            try{\r\n                this.setState({\r\n                    country: res.country,\r\n                    display_name: res.display_name,\r\n                    profile_img: res.images[0].url,\r\n                    email: res.email,\r\n                    followers: res.followers.total,\r\n                    account_type: res.product,\r\n                    id: res.id,\r\n                    link: res.external_urls.spotify\r\n                });\r\n            } catch(e){\r\n                alert(\"Your Information Was Not Successfully Retrieved. Try refreshing the page!\");\r\n            }\r\n            \r\n        }, () => {\r\n            alert('Profile Data Could Not Be Fetched!');\r\n        });\r\n    }\r\n    render() { \r\n        return (\r\n            <div className=\"container-profile\">\r\n                <img src={this.state.profile_img} alt=\"Could Not Be Loaded\"/>\r\n                <h4><strong>Country: </strong>{this.state.country}</h4>\r\n                <h4><strong>Display Name: </strong>{this.state.display_name}</h4>\r\n                <h4><strong>Email: </strong>{this.state.email}</h4>\r\n                <h4><strong>ID: </strong>{this.state.id}</h4>\r\n                <h4><strong>Followers: </strong>{this.state.followers}</h4>\r\n                <h4><strong>Account Type: </strong>{this.state.account_type}</h4>\r\n                <h4><a target=\"_blank\" rel=\"noopener noreferrer\" href={this.state.link}>Link</a></h4>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Profile;","import React from 'react';\r\nimport classes from './style/SearchForm.module.css';\r\n\r\nconst SearchForm = ({ onSearch, onChange }) => {\r\n  return (\r\n    <form className={classes.SearchForm} onSubmit={onSearch}>\r\n      <input type=\"text\" className=\"form-control\" placeholder=\"Search\" onChange={onChange} />\r\n      <button type=\"submit\" className=\"btn btn-info\">Let's Get It!</button>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default SearchForm\r\n","import React from 'react';\r\nimport classes from './style/SearchFilter.module.css';\r\n\r\nconst SearchFilter = ({ onchange, filter: { album, track, limit } }) => {\r\n  return (\r\n    <div className={classes.SearchFilter}>\r\n      <a href=\"!#\" data-toggle=\"collapse\" data-target=\"#filter-panel\" aria-expanded=\"false\">Advanced Options</a>\r\n      <div id=\"filter-panel\" className=\"collapse\">\r\n        <div className=\"card\">\r\n          <div className={`${classes.CardBody} card-body`}>\r\n            <form>\r\n              <label htmlFor=\"opt-limit\">Limit :</label>\r\n              <input type=\"text\" name=\"limit\" value={limit} onChange={onchange}/>\r\n            </form>\r\n            <div>\r\n              <form>\r\n                <input type=\"checkbox\" name=\"album\" checked={album} onChange={onchange}/>\r\n                <label htmlFor=\"opt-album\">Album</label>\r\n              </form>\r\n              <form>\r\n                <input type=\"checkbox\" name=\"track\" checked={track} onChange={onchange}/>\r\n                <label htmlFor=\"opt-track\">Track</label>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SearchFilter;\r\n","import React from 'react';\r\n\r\nconst SortOption = ({ onchange, selected }) => {\r\n  // let [ optionState, setOptionState ] = useState('popular');\r\n\r\n  // const handleChange = (event) => {\r\n  //   console.log('event: ' + event.target.value);\r\n  //   setOptionState(event.target.value);\r\n  //   console.log('option:' + optionState);\r\n  // }\r\n  return (\r\n    <div>\r\n      <p className=\"text-center\" style={{margin: '0'}}>Sort By:</p>\r\n      <select className=\"form-control\" value={selected} onChange={(e) => onchange(e.target.value)} >\r\n        <option value=\"popular\">Most Popular</option>\r\n        <option value=\"newest\">Newest</option>\r\n        <option value=\"oldest\">Oldest</option>\r\n      </select>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SortOption\r\n","import React, { Fragment } from 'react';\r\nimport SortOption from './SortOption';\r\nimport classes from './style/ArtworkDisplay.module.css';\r\n\r\n\r\nconst ArtworkDisplay = ({ albumList, onAlbumClick, header, onchange, selected }) => {\r\n\r\n  const isSelectOption = header === 'Tracks' ? <SortOption onchange={onchange} selected={selected} /> : null;\r\n\r\n  return (\r\n    <Fragment>\r\n      <div className={classes.AlbumHeader}>\r\n        <h1 style={{textAlign: 'center', marginBottom: '1rem'}}>{header}{' '}</h1>\r\n        {isSelectOption}\r\n      </div>\r\n      <div className={classes.AlbumDisplay}>\r\n        {albumList.map((album, index) => {\r\n          return (\r\n            <div key={index}>\r\n              <img src={album.artwork} alt=\"no artwork found\" onClick={() => onAlbumClick(index)}/>\r\n              <h6><strong>{album.artist}</strong></h6>\r\n              <h6>{album.name}</h6>\r\n            </div>\r\n          )\r\n        })}\r\n      </div>\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default ArtworkDisplay;\r\n","import React, { useState, useEffect, Fragment } from 'react';\r\nimport axios from 'axios';\r\nimport withToast from '../../hoc/withToast';\r\nimport classes from './style/AlbumTracklist.module.css';\r\nimport Spinner from '../Layout/Spinner';\r\n\r\nconst AlbumTracklist = ({ albumTracklist: { tracklist, duration_s, release_date, album, artwork, artist, uri }, isPlaying, loading, displayModal, addToast }) => {\r\n  // Instantiate states\r\n  let [ preview, setPreview ] = useState('');  // preview_href\r\n  let [ currentTrack, setCurrentTrack ] = useState('');  // \r\n  \r\n  // Stops the playing audio when the Modal hides\r\n  // ComponentDidUpdate on displayModal prop\r\n  useEffect(() => {\r\n    setPreview('');\r\n    setCurrentTrack('');\r\n  }, [displayModal]);\r\n\r\n  const playPreview = ( index, preview_url ) => {\r\n    if(preview_url === null){\r\n      addToast('No Previews Found', {\r\n        appearance: 'warning',\r\n        autoDismiss: true\r\n      })\r\n    }else{ \r\n      const string = `${artist} - ${tracklist[index].name}`\r\n      setPreview(preview_url);\r\n      setCurrentTrack(string);\r\n      isPlaying();\r\n    }\r\n  }\r\n  \r\n  const displayNowPlaying = () => {\r\n    if( currentTrack.length > 0 ){\r\n      return (\r\n        <Fragment>\r\n          <p className=\"text-center\">Now Playing: </p>\r\n          <p className=\"text-center\"><strong>{currentTrack}</strong></p>\r\n        </Fragment>\r\n      )\r\n    }\r\n  }\r\n\r\n  const displayDuration = () => {\r\n    if(duration_s < 3600){\r\n      return `${Math.floor(duration_s / 60)} min`;\r\n    } else {\r\n      const hours = Math.floor(duration_s / 3600);\r\n      let minutes = Math.floor((duration_s % 3600) / 60);\r\n\r\n      return `${hours} hr ${minutes} min`;\r\n    }\r\n  }\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    const token = sessionStorage.getItem('token');\r\n\r\n    try {\r\n      const res = await axios({\r\n        method: 'GET',\r\n        url: 'https://api.spotify.com/v1/me/player/devices',\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      let device_id = '';\r\n      if(res.data.devices.length > 0){\r\n        device_id = res.data.devices[0].id;\r\n      } else {\r\n        await window.open(uri, '_self');\r\n      }\r\n      await axios({\r\n        method: 'PUT',\r\n        url: 'https://api.spotify.com/v1/me/player/play',\r\n        params: { 'device_id' : device_id },\r\n        data: { 'context_uri': uri },\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n\r\n      addToast(`${album} playing in Spotify client`, {\r\n        appearance: 'success',\r\n        autoDismiss: true\r\n      });\r\n    } catch (error) {\r\n      addToast(`${error.response.status}: ${error.response.data ? error.response.data.error.message : 'Error Encountered'}`, {\r\n        appearance: 'error',\r\n        autoDismiss: true\r\n      });\r\n      if(error.response.data.error.message === \"Device not found\"){\r\n        addToast(`Please open Spotify client`, {\r\n          appearance: 'error',\r\n          autoDismiss: true\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  if(loading) return <Spinner />\r\n\r\n  return (\r\n    <div className={`row ${classes.AlbumTracklist}`}>\r\n      <div className=\"col-md-4\">\r\n        <img src={artwork} alt=\"No Previews Found\"/>\r\n        <div className={classes.description}>\r\n          <div className={classes.AlbumName}>\r\n            <h3>{album}</h3>\r\n            <form onSubmit={handleSubmit}>\r\n              <input type=\"submit\" className=\"btn btn-success\" value={`Play album in Spotify`}/>\r\n            </form>\r\n          </div>\r\n          <hr/>\r\n          <p>By {artist}</p>\r\n          <p>{release_date}</p>\r\n          <p>{tracklist.length} Songs - {displayDuration()}</p>\r\n          <audio controls autoPlay src={preview} className=\"player-album\"></audio>\r\n          {displayNowPlaying()}\r\n        </div>\r\n      </div>\r\n      <div className={`col-md-8 ${classes.TrackListContainer}`}>\r\n        <h2 style={{marginBottom: '1rem'}}>{album} Tracklist</h2>\r\n        <ol>\r\n          {tracklist.map((track, index) => {\r\n            return (\r\n            <li key={index} onClick={(() => playPreview(index, track.preview))} className=\"track-item\">\r\n              <i className={`fa fa-play-circle`} ></i>\r\n              {track.name}\r\n            </li>)\r\n          })}\r\n        </ol>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default withToast(AlbumTracklist);\r\n","import React from 'react'\r\nimport classes from './style/Backdrop.module.css'\r\n\r\nconst Backdrop = ({ show, clicked }) => {\r\n  return show ? <div className={classes.Backdrop} onClick={clicked}></div> : null;\r\n}\r\n\r\nexport default Backdrop\r\n","import React from 'react';\r\nimport Backdrop from './Backdrop';\r\nimport classes from './style/Modal.module.css';\r\n\r\nconst Modal2 = ({ displayModal, children, hideModal }) => {\r\n  return (\r\n    <div>\r\n      <Backdrop show={displayModal} clicked={hideModal}/>\r\n      <div className={classes.Modal}\r\n        style={{\r\n          transform: displayModal\r\n            ? \"translateY(0)\"\r\n            : \"translateY(-100vh))\",\r\n          opacity: displayModal ? \"1\" : \"0\",\r\n          display: displayModal ? \"block\" : \"none\"\r\n        }}>\r\n        <i className={`fa fa-window-close ${classes.CloseButton}`} aria-hidden=\"true\" onClick={hideModal}></i>\r\n        {children}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Modal2\r\n","import React, { Component } from 'react';\r\nimport withToast from '../../hoc/withToast';\r\nimport SearchForm from './SearchForm';\r\nimport SearchFilter from './SearchFilter';\r\nimport Spinner from '../Layout/Spinner';\r\nimport ArtworkDisplay from './ArtworkDisplay';\r\nimport AlbumTracklist from './AlbumTracklist';\r\nimport AuthContext from '../../context/auth-context';\r\nimport Modal from './Modal';\r\nimport axios from 'axios';\r\n\r\n\r\nclass Search extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.token = sessionStorage.getItem('token');\r\n    this.state = {\r\n      loading: false,\r\n      modalLoading: false,\r\n      searchText: '',\r\n      header: 'Search',\r\n      audio_src: '',\r\n      selected_option: 'popular',\r\n      queryParams: {\r\n        type: 'track,album',\r\n        limit: 50\r\n      },\r\n      albumList: [],\r\n      trackList: [],\r\n      albumTracklist: {},\r\n      displayModal: false,\r\n      searchCompleted: false,\r\n      inputFilter:{\r\n        limit: 50,\r\n        album: true,\r\n        track: true\r\n      }\r\n    }\r\n  }\r\n  static contextType = AuthContext;\r\n  fetchData = async () => {\r\n    const { inputFilter } = this.state;\r\n    let type = '';\r\n    if(inputFilter.album && inputFilter.track) type = 'track,album';\r\n    else if (inputFilter.album && !inputFilter.track) type = 'album';\r\n    else if (!inputFilter.album && inputFilter.track) type = 'track';\r\n    else {\r\n      this.props.addToast('Nothing selected', {\r\n        appearance: 'error',\r\n        autoDismiss: true\r\n      });\r\n    }\r\n    try {\r\n      const res = await axios.get('https://api.spotify.com/v1/search', {\r\n      params: {\r\n        q: this.state.searchText,\r\n        type: type,\r\n        limit: this.state.inputFilter.limit\r\n      },\r\n      headers: { 'Authorization' : `Bearer ${this.token}` }\r\n    });\r\n    \r\n    let albumList = [];\r\n    let trackList = [];\r\n    const data = res.data;\r\n    // If Search Filter includes Album\r\n    if(inputFilter.album){\r\n      // Storing Albums\r\n      for(let i = 0; i < data.albums.items.length; i++){\r\n        let albumData = data.albums.items[i];\r\n        // Check if album type is 'album'\r\n        if(albumData.total_tracks > 1){\r\n          let store = {\r\n            name: albumData.name,\r\n            artwork: albumData.images[1].url,\r\n            artist: albumData.artists[0].name,\r\n            album_href: albumData.href,\r\n            release_date: albumData.release_date\r\n          }\r\n          albumList.push(store);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (inputFilter.track){\r\n      // Storing Tracks\r\n      for(let i = 0; i < data.tracks.items.length; i++){\r\n        let trackData = data.tracks.items[i];\r\n        let store = {\r\n          name: trackData.name,\r\n          artist: trackData.artists[0].name,\r\n          track_preview: trackData.preview_url,\r\n          track_href: trackData.href,\r\n          artwork: trackData.album.images[1].url,\r\n          release_date: trackData.album.release_date,\r\n          popularity: trackData.popularity\r\n        }\r\n        if(store.track_preview === null){\r\n          store.track_preview = await this.getPreview(store.track_href);\r\n        }\r\n        trackList.push(store);\r\n      }\r\n    }\r\n\r\n    if(albumList.length === 0 && trackList.length === 0){\r\n      this.props.addToast(`No Results Found`, {\r\n        appearance: 'warning',\r\n        autoDismiss: true\r\n      });\r\n    } else {\r\n      // Sort album list by newest first\r\n      albumList = this.sortList(albumList);\r\n      trackList = this.sortList(trackList, 'popular');\r\n    }\r\n\r\n    this.setState({ \r\n      albumList,\r\n      trackList,\r\n      loading: false\r\n    });\r\n    } catch (error) {\r\n      this.props.addToast(`${error.response.status}: ${error.response.data.error.message}`, {\r\n        appearance: 'error',\r\n        autoDismiss: true\r\n      });\r\n      this.setState({ loading: false });\r\n      if(error.response.status === 401){\r\n        sessionStorage.clear();\r\n        this.context.updateAuth(false);\r\n\t\t\t}\r\n    }\r\n  }\r\n  // function that sort list according to Select option\r\n  sortList = (list, sortOption) => {\r\n    switch(sortOption){\r\n      case 'oldest':\r\n        return list.sort((a, b) => {\r\n          return new Date(a.release_date) - new Date(b.release_date);\r\n        });\r\n      case 'popular':\r\n        return list.sort((a, b) => {\r\n          return b.popularity - a.popularity;\r\n        })\r\n      default:\r\n        return list.sort((a, b) => {\r\n          return new Date(b.release_date) - new Date(a.release_date);\r\n        });\r\n    }\r\n  }\r\n  // function that handle clicking on Search button\r\n  handleSearch = (e) => {\r\n    e.preventDefault();\r\n    let header = this.state.header;\r\n    if(this.state.searchText.length < 1){\r\n      this.props.addToast('Search Field is Empty', {\r\n          appearance: 'info',\r\n          autoDismiss: true\r\n      })\r\n    } else {\r\n      header = `Results: ${this.state.searchText}`;\r\n      this.setState({ loading: true });\r\n      this.fetchData();\r\n    }\r\n    this.setState({ \r\n      header: header \r\n    });\r\n  }\r\n  // Fetches Preview if initial fetch returns empty\r\n  getPreview = async (href) => {\r\n    try {\r\n      const res = await axios.get(href, {\r\n        headers: { 'Authorization' : `Bearer ${this.token}` }\r\n      });\r\n      return res.data.preview_url;\r\n    } catch (error) {\r\n      this.props.addToast(`${error.response.status}: ${error.response.data.error.message}`, {\r\n        appearance: 'error',\r\n        autoDismiss: true\r\n      });\r\n    }\r\n  }\r\n  fetchTracklist = async (index) => {\r\n    try{\r\n      this.setState({ modalLoading: true })\r\n      const res = await axios.get(this.state.albumList[index].album_href, {\r\n        headers: { 'Authorization' : `Bearer ${this.token}` }\r\n      });\r\n      let tracklist = [];\r\n      let duration_ms = 0;\r\n      const trackData = res.data.tracks.items;\r\n\r\n      // Stores Tracklist\r\n      for(let i = 0; i < trackData.length; i++){\r\n        duration_ms += trackData[i].duration_ms\r\n        let store = {\r\n          name: trackData[i].name,\r\n          preview: trackData[i].preview_url,\r\n        }\r\n        tracklist.push(store);\r\n      }\r\n      const albumTracklist = {\r\n        tracklist,\r\n        duration_s: duration_ms / 1000,\r\n        release_date: res.data.release_date,\r\n        album: res.data.name,\r\n        artwork: res.data.images[1].url,\r\n        artist: res.data.artists[0].name,\r\n        uri: res.data.uri,\r\n      }\r\n\r\n      this.setState({ \r\n        albumTracklist,\r\n        searchCompleted: true, \r\n        modalLoading: false \r\n      });\r\n    } catch (error) {\r\n      this.props.addToast(`${error.response.status}: ${error.response.data.error.message}`, {\r\n        appearance: 'error',\r\n        autoDismiss: true\r\n      });\r\n      if(error.response.status === 401){\r\n        sessionStorage.clear();\r\n        \r\n\t\t\t}\r\n    }\r\n  }\r\n  handleAlbumClick = (index) => {\r\n    this.setState({ displayModal: true });\r\n    \r\n    this.fetchTracklist(index);\r\n  }\r\n  handleTrackClick = (index) => {\r\n    this.setState({ \r\n      audio_src: this.state.trackList[index].track_preview,\r\n    })\r\n  }\r\n  handleOptionChange = (option) => {\r\n    const sortedList = this.sortList(this.state.trackList, option);\r\n    this.setState({ \r\n      trackList: sortedList,\r\n      selected_option: option\r\n    });\r\n  }\r\n  handleCheckbox = (e) => {\r\n    // Calling event.persist() on the event removes the synthetic event\r\n    // from the pool and allows references to the event to be \r\n    // retained asynchronously\r\n    e.persist();\r\n    if(e.target.name === 'album'){\r\n      this.setState( prevState => {\r\n        return {\r\n          ...prevState,\r\n          inputFilter: {\r\n            album: !prevState.inputFilter.album,\r\n            track: prevState.inputFilter.track,\r\n            limit: prevState.inputFilter.limit\r\n          }\r\n        }\r\n      });\r\n    } else if (e.target.name === 'track') {\r\n      this.setState( prevState => {\r\n        return {\r\n          ...prevState,\r\n          inputFilter: {\r\n            album: prevState.inputFilter.album,\r\n            track: !prevState.inputFilter.track,\r\n            limit: prevState.inputFilter.limit\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      this.setState( prevState => {\r\n        return {\r\n          ...prevState,\r\n          inputFilter: {\r\n            album: prevState.inputFilter.album,\r\n            track: prevState.inputFilter.track,\r\n            limit: e.target.value\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  handlePlayingStatus = () => this.setState({ audio_src: '' });\r\n  handleCloseModal = () =>  this.setState({ displayModal: false }) \r\n  \r\n  render() {\r\n    const { \r\n      loading, \r\n      header, \r\n      albumList, \r\n      trackList, \r\n      displayModal, \r\n      albumTracklist, \r\n      audio_src, \r\n      modalLoading, \r\n      selected_option, \r\n      inputFilter,\r\n      searchCompleted\r\n    } = this.state;\r\n    \r\n    // Displays loading icon when fetching tracks and albums\r\n    const loadSpinner = loading ? <Spinner /> : null;\r\n\r\n    // Render Album List Component on DOM\r\n    const loadAlbumList = () => {\r\n      if(!loading && albumList.length > 0) {\r\n        return (\r\n          <ArtworkDisplay \r\n            header=\"Albums\"\r\n            albumList={albumList} \r\n            onAlbumClick={this.handleAlbumClick}/>\r\n        )\r\n      }\r\n    }\r\n    // Render Track List Component on DOM\r\n    const loadTrackList = () => {\r\n      if(!loading && trackList.length > 0){\r\n        return( \r\n          <ArtworkDisplay \r\n            header=\"Tracks\"\r\n            albumList={trackList} \r\n            selected={selected_option} \r\n            onAlbumClick={this.handleTrackClick} \r\n            onchange={this.handleOptionChange}/>\r\n        )\r\n      }\r\n    }\r\n    return (\r\n      <div>\r\n        <audio alt=\"No Tracks Found\" src={audio_src} autoPlay></audio>\r\n        <Modal displayModal={displayModal} hideModal={this.handleCloseModal}>\r\n          {searchCompleted && <AlbumTracklist loading={modalLoading} albumTracklist={albumTracklist} isPlaying={this.handlePlayingStatus} displayModal={displayModal}/>}\r\n        </Modal>\r\n        <h1 className=\"text-center\" style={{textTransform: 'capitalize'}}>{header}</h1>\r\n        <SearchForm onSearch={this.handleSearch} onChange={(e) => this.setState({ searchText: e.target.value })}/>\r\n        <SearchFilter onchange={this.handleCheckbox} filter={inputFilter}/>\r\n        {loadSpinner}\r\n        {loadAlbumList()}\r\n        {loadTrackList()}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withToast(Search);\r\n","import React from 'react';\r\nimport classes from './style/Pagination.module.css';\r\n\r\nconst Pagination = ({ totalTracks, tracksPerPage, paginate }) => {\r\n  const pageNumber = [];\r\n\r\n  // Calculate the amount of pages required for the tracklist array\r\n  // number of pages = total_tracks / number of tracks per page\r\n  for(var i = 1; i <= Math.ceil(totalTracks / tracksPerPage); i++){\r\n    pageNumber.push(i);\r\n  }\r\n  \r\n  return (\r\n    <div className={classes.Pagination}>\r\n      <ul className=\"pagination\">\r\n        {pageNumber.map(page => {\r\n          return (\r\n            <li key={page} className=\"page-item\">\r\n              <a href=\"!#\" onClick={(e) => paginate(e, page)} className=\"page-link\">\r\n                {page}\r\n              </a>\r\n            </li>\r\n          )\r\n        })}\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Pagination;","import React from 'react';\r\nimport classes from './style/TracksDisplay.module.css';\r\n\r\nconst TracksDisplay = ({ indexOfFirstPage, currentTracks, onclick }) => {\r\n  return (\r\n    <ol start={indexOfFirstPage+1} className={classes.TracksDisplay} >\r\n      {currentTracks.map((track) => {\r\n        return (\r\n          <li \r\n            key={track.key} \r\n            onClick={() => onclick(track.key, track.name)}>\r\n              {` ${track.name}`}\r\n          </li>\r\n        )\r\n      })}\r\n    </ol>\r\n  )\r\n}\r\n\r\nexport default TracksDisplay;","import React from 'react';\r\nimport axios from 'axios';\r\nimport withToast from '../../hoc/withToast';\r\nimport classes from './style/TrackControl.module.css';\r\n\r\nconst TrackControl = ({songFocus, currentTrack: { name, preview, image_src, uri }, addToast }) => {\r\n  const handleClick = async (e) => {\r\n    e.preventDefault();\r\n    const token = sessionStorage.getItem('token');\r\n    try {\r\n      const res = await axios({\r\n        method: 'GET',\r\n        url: 'https://api.spotify.com/v1/me/player/devices',\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      let device = {};\r\n      if(res.data.devices.length > 0){\r\n        device.id = res.data.devices[0].id;\r\n        device.name = res.data.devices[0].name;\r\n\r\n        document.querySelector('audio').pause();\r\n        document.querySelector('audio').autoplay = false;\r\n        await axios({\r\n          method: 'PUT',\r\n          url: 'https://api.spotify.com/v1/me/player/play',\r\n          params: { 'device_id' : device.id },\r\n          data: { 'uris': [uri] },\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        addToast(`${name} playing in ${device.name}`, {\r\n          appearance: 'success',\r\n          autoDismiss: true\r\n        });\r\n      } else {\r\n        window.open(uri, '_self');\r\n      }\r\n    } catch (error) {\r\n      addToast(`${error.response.status}: ${error.response.data ? error.response.data.error.message : 'Error Encountered'}`, {\r\n        appearance: 'error',\r\n        autoDismiss: true\r\n      });\r\n      if(error.response.data.error.message === \"Device not found\"){\r\n        addToast(`Please open Spotify client`, {\r\n          appearance: 'error',\r\n          autoDismiss: true\r\n        });\r\n      }\r\n    }\r\n  }\r\n  return (\r\n    <div className={`col-lg-8 ${classes.TrackOrder}`}>\r\n      {songFocus &&\r\n      <div className={classes.TrackControl}>\r\n        <img src={image_src} alt=\"no artwork found\" className=\"track-img\"/>\r\n        <div>\r\n          <p>Now Playing: </p>\r\n          <p><strong>{name}</strong></p>\r\n          <audio controls autoPlay src={preview}></audio>\r\n          <button className=\"btn btn-success\" onClick={handleClick}>Play in Spotify</button>\r\n        </div>\r\n      </div>}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default withToast(TrackControl);\r\n","import React, { Component } from 'react';\r\nimport Pagination from '../Layout/Pagination';\r\nimport TracksDisplay from './TracksDisplay';\r\nimport TrackControl from './TrackControl';\r\nimport withToast from '../../hoc/withToast';\r\nimport classes from './style/TrackList.module.css';\r\n\r\nclass TrackList extends Component {\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tcurrentTrack: {\r\n\t\t\t\tname: '',\r\n\t\t\t\tpreview: '',\r\n\t\t\t\timage_src: ''\r\n\t\t\t},\r\n\t\t\tsongFocus: false,\r\n\t\t\tcurrentPage: 1,\r\n\t\t\ttracksPerPage: 20,\r\n\t\t\tactiveClass: false\r\n\t\t}\r\n\t}\r\n\t// Handler for clicking of a track\r\n\thandleClick = (key, song) => {\r\n\t\tvar { tracklist } = this.props;\r\n\t\tvar track = {\r\n\t\t\tname: song,\r\n\t\t\tpreview: tracklist[key].preview,\r\n\t\t\timage_src: tracklist[key].artwork,\r\n\t\t\turi: tracklist[key].uri\r\n\t\t}\r\n\t\tif(track.preview === null){\r\n\t\t\tthis.props.addToast(`No Previews Found`, {\r\n\t\t\t\t\tappearance: 'warning',\r\n\t\t\t\t\tautoDismiss: true\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.setState({ \r\n\t\t\t\tsongFocus: true,\r\n\t\t\t\tcurrentTrack: track,\r\n\t\t\t\tactiveClass: true\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t// update state of the currentPage to display\r\n\tpaginate = (event, number) => {\r\n\t\tevent.preventDefault();\r\n\t\tthis.setState({ currentPage: number });\r\n\t}\r\n\trender() { \r\n\t\tconst { \r\n\t\t\t\tsongFocus,\r\n\t\t\t\tcurrentPage,\r\n\t\t\t\ttracksPerPage,\r\n\t\t\t\tcurrentTrack,\r\n\t\t\t\tactiveClass\r\n\t\t} = this.state;\r\n\t\tconst { term, tracklist } = this.props;\r\n\r\n\t\t// Display period of the fetch\r\n\t\tvar termHeader = term.substring(0, term.indexOf('_'));\r\n\r\n\t\t// Retrieving Pagination Indexes\r\n\t\t// get the list of tracks in focus\r\n\t\tlet indexOfLastPage = currentPage * tracksPerPage;\r\n\t\tlet indexOfFirstPage = indexOfLastPage - tracksPerPage;\r\n\t\tlet currentTracks = tracklist.slice(indexOfFirstPage, indexOfLastPage);\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div className={`col-lg-4 ${classes.TrackList}`}>\r\n\t\t\t\t\t<p style={{fontWeight: 'bold', textAlign: 'center', textTransform: 'capitalize'}}>{termHeader} term</p>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<TracksDisplay \r\n\t\t\t\t\t\t\t\tindexOfFirstPage={indexOfFirstPage}\r\n\t\t\t\t\t\t\t\tcurrentTracks={currentTracks}\r\n\t\t\t\t\t\t\t\tonclick={this.handleClick} />\r\n\t\t\t\t\t\t<Pagination \r\n\t\t\t\t\t\t\t\ttotalTracks={tracklist.length} \r\n\t\t\t\t\t\t\t\ttracksPerPage={tracksPerPage} \r\n\t\t\t\t\t\t\t\tpaginate={this.paginate} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<TrackControl \r\n\t\t\t\t\tsongFocus={songFocus}\r\n\t\t\t\t\tcurrentTrack={currentTrack}\r\n\t\t\t\t\tactiveClass={activeClass} />\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withToast(TrackList)\r\n","import React from 'react'\r\n\r\nconst TrackOption = ({ term, onchange }) => {\r\n  return (\r\n    <select className=\"form-control\" value={term} onChange={onchange}>\r\n      <option value=\"short_term\">4 Weeks</option>\r\n      <option value=\"medium_term\">6 Months</option>\r\n      <option value=\"long_term\">All Time</option>\r\n    </select>\r\n  )\r\n}\r\n\r\nexport default TrackOption\r\n","import React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport withToast from '../../hoc/withToast';\r\nimport TrackList from './TrackList';\r\nimport Spinner from '../Layout/Spinner';\r\nimport TrackOption from './TrackOption';\r\nimport classes from './style/TopTracks.module.css';\r\nimport AuthContext from '../../context/auth-context';\r\n\r\nclass TopTracks extends Component {\r\n\tconstructor(){\r\n\t\tsuper();\r\n\t\tthis.token = sessionStorage.getItem('token');\r\n\t\tthis.state = {\r\n\t\t\tterm: \"short_term\",\r\n\t\t\tloading: false,\r\n\t\t\ttracklist: [],\r\n\t\t};\r\n\t}\r\n\tstatic contextType = AuthContext;\r\n\r\n\tcomponentDidMount(){\r\n\t\t// Starts fetching action when component is loaded\r\n\t\t// Default for fetching is Short Term\r\n\t\tthis.setState({ loading: true });\r\n\t\tthis.fetchTracklist('short_term');\r\n\t}\r\n\tfetchTracklist = async (term) => {\r\n\t\ttry {\r\n\t\t\tlet res = await axios.get('https://api.spotify.com/v1/me/top/tracks', {\r\n\t\t\tparams: {\r\n\t\t\t\ttime_range: term,\r\n\t\t\t\tlimit: 50\r\n\t\t\t},\r\n\t\t\theaders: { 'Authorization': `Bearer ${this.token}` }\r\n\t\t\t});\r\n\t\t\r\n\t\t\t// Store tracklist, preview_url and artwork\r\n\t\t\tlet trackList = [];\r\n\t\t\ttrackList = await this.storeTrackList(res, trackList);\r\n\r\n\t\t\tres = await axios.get('https://api.spotify.com/v1/me/top/tracks', {\r\n\t\t\tparams: {\r\n\t\t\t\ttime_range: term,\r\n\t\t\t\tlimit: 50,\r\n\t\t\t\toffset: 49\r\n\t\t\t},\r\n\t\t\theaders: { 'Authorization': `Bearer ${this.token}` }\r\n\t\t\t}); \r\n\r\n\t\t\ttrackList = await this.storeTrackList(res, trackList, 50)\r\n\t\t\tthis.setState({ tracklist: trackList, loading: false });\r\n\t\t\t\r\n\t\t} catch (error) {\r\n\t\t\tthis.props.addToast(`${error.response.status}: ${error.response.data ? error.response.data.error.message : 'Error Encountered'}`, {\r\n\t\t\t\tappearance: 'error',\r\n\t\t\t\tautoDismiss: true\r\n\t\t\t});\r\n\t\t\t// Triggers when access token is expired\r\n\t\t\tif(error.response.status === 401){\r\n\t\t\t\tsessionStorage.clear();\r\n\t\t\t\tthis.context.updateAuth(false);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tstoreTrackList = async (res, trackList, offset = 0) => {\r\n\t\tlet trackArray = trackList;\r\n\t\tlet preview_url = '';\r\n\t\tconst data = res.data.items;\r\n\t\tfor (let i = 0; i < data.length; i++){\r\n\t\t\t// Gather list of artist in track\r\n\t\t\tlet artists = '';\r\n\t\t\tfor(let j = 0; j < data[i].artists.length; j++){\r\n\t\t\t\tif(artists.length > 1){\r\n\t\t\t\t\tartists += `, ${data[i].artists[j].name}`\r\n\t\t\t\t} else {\r\n\t\t\t\t\tartists += data[i].artists[j].name\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// If Preview URL is null in initial fetch\r\n\t\t\t// fetches deeper to get the preview\r\n\t\t\tif(data[i].preview_url === null){\r\n\t\t\t\tconst res_track = await axios.get(data[i].href, {\r\n\t\t\t\t\theaders: { 'Authorization': `Bearer ${this.token}` }\r\n\t\t\t\t})\r\n\t\t\t\tpreview_url = res_track.data.preview_url;\r\n\t\t\t} else {\r\n\t\t\t\tpreview_url = data[i].preview_url;\r\n\t\t\t}\r\n\t\t\tconst store = {\r\n\t\t\t\tkey: i + offset,\r\n\t\t\t\tname: `${artists} - ${data[i].name}`,\r\n\t\t\t\tartwork: data[i].album.images[0].url,\r\n\t\t\t\tpreview: preview_url,\r\n\t\t\t\turi: data[i].uri\r\n\t\t\t}\r\n\t\t\ttrackArray.push(store);\r\n\t\t}\r\n\t\treturn trackArray;\r\n\t}\r\n\thandleOption = async (e) => {\r\n\t\tthis.setState({\r\n\t\t\tterm: e.target.value,\r\n\t\t\tloading: true\r\n\t\t});\r\n\t\tthis.fetchTracklist(e.target.value);\r\n\t}\r\n\trender() { \r\n\t\t\tvar { term, tracklist, loading } = this.state;\r\n\t\t\tif(loading) return <Spinner />\r\n\t\t\treturn (\r\n\t\t\t\t<Fragment>\r\n\t\t\t\t\t<div className={classes.TopTracks}>\r\n\t\t\t\t\t\t<h1 className=\"text-center\">Top Tracks</h1>\r\n\t\t\t\t\t\t<div className={`form-group ${classes.TrackOption}`}>\r\n\t\t\t\t\t\t\t<p>View:</p>\r\n\t\t\t\t\t\t\t<TrackOption term={term} onchange={(this.handleOption)} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t<TrackList term={term} tracklist={tracklist}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Fragment>\r\n\t\t\t);\r\n\t}\r\n}\r\n\r\nexport default withRouter(withToast(TopTracks));","import React from 'react'\r\n\r\nconst ArtistDisplay = ({ indexFirstOfPage, artist_list, onclick }) => {\r\n  return (\r\n    <ol start={indexFirstOfPage + 1}>\r\n      {artist_list.map(artist => {\r\n        return (\r\n          <li key={artist.key} onClick={() => onclick(artist)}>{artist.name}</li>\r\n        )\r\n      })}\r\n    </ol>\r\n  )\r\n}\r\n\r\nexport default ArtistDisplay\r\n","import React, { Component } from 'react';\r\nimport ArtistDisplay from './ArtistDisplay';\r\nimport Pagination from '../Layout/Pagination';\r\nimport classes from './style/ArtistList.module.css';\r\n\r\nclass ArtistList extends Component {\r\n\tstate = {\r\n\t\tcurrentPage: 1,\r\n\t\tartistPerPage: 20\r\n\t}\r\n\tpaginate = (e, page) => {\r\n\t\te.preventDefault();\r\n\t\tthis.setState({\r\n\t\t\tcurrentPage: page\r\n\t\t})\r\n\t}\r\n\trender(){\r\n\t\tconst { term, artist_list } = this.props;\r\n\t\tconst {\r\n\t\t\tcurrentPage,\r\n\t\t\tartistPerPage\r\n\t\t} = this.state;\r\n\t\tconst termHeader = term.substring(0, term.indexOf('_'));\r\n\r\n\t\tlet indexLastOfPage = currentPage * artistPerPage;\r\n\t\tlet indexFirstOfPage = indexLastOfPage - artistPerPage;\r\n\t\tlet current_artists = artist_list.slice(indexFirstOfPage, indexLastOfPage);\r\n\r\n\t\treturn (\r\n\t\t\t<div className={classes.ArtistList}>\r\n\t\t\t\t<p>{termHeader} term</p>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<ArtistDisplay indexFirstOfPage={indexFirstOfPage} artist_list={current_artists} onclick={this.props.showModal}/>\r\n\t\t\t\t\t<Pagination totalTracks={artist_list.length} tracksPerPage={artistPerPage} paginate={this.paginate} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default ArtistList\r\n","import React from 'react'\r\n\r\nconst SelectedOption = ({ term, onchange }) => {\r\n  return (\r\n    <select className=\"form-control\" value={term} onChange={onchange} >\r\n      <option value=\"short_term\">4 Weeks</option>\r\n      <option value=\"medium_term\">6 Months</option>\r\n      <option value=\"long_term\">All Time</option>\r\n    </select>\r\n  )\r\n}\r\n\r\nexport default SelectedOption;\r\n","import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport Spinner from '../Layout/Spinner';\r\nimport withToast from '../../hoc/withToast';\r\nimport classes from './style/ArtistDetails.module.css';\r\n\r\nconst ArtistDetails = ({ loading, myArtist: { artist, my_ArtistTracks, artistTopTracks }, addToast}) => {\r\n  const [ preview, setPreview ] = useState('');\r\n\r\n  const handlePlaySong = async (e, index, type) => {\r\n    e.preventDefault();\r\n    try {\r\n      const token = sessionStorage.getItem('token');\r\n      const res = await axios({\r\n        method: 'GET',\r\n        url: 'https://api.spotify.com/v1/me/player/devices',\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      let device = {};\r\n      if(res.data.devices.length > 0){\r\n        device.id = res.data.devices[0].id;\r\n        device.name = res.data.devices[0].name;\r\n      } else {\r\n        window.open(type[index].uri, '_self');\r\n      }\r\n      await axios({\r\n        method: 'PUT',\r\n        url: 'https://api.spotify.com/v1/me/player/play',\r\n        params: { 'device_id' : device.id },\r\n        data: { 'uris': [type[index].uri] },\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n\r\n      addToast(`${type[index].name} playing in ${device.name}`, {\r\n        appearance: 'success',\r\n        autoDismiss: true\r\n      });\r\n    } catch (error) {\r\n      addToast(`${error.response.status}: ${error.response.data ? error.response.data.error.message : 'Error Encountered'}`, {\r\n        appearance: 'error',\r\n        autoDismiss: true\r\n      });\r\n      if(error.response.data.error.message === \"Device not found\"){\r\n        addToast(`Please open Spotify client`, {\r\n          appearance: 'error',\r\n          autoDismiss: true\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  if( loading ) return <Spinner />\r\n\r\n  return (\r\n    <div className={`${classes.ArtistDetails} row`}>\r\n      <div className={`col-md-4 ${classes.ArtistContainer}`}>\r\n        <img src={artist.images} alt=\"No Images Found\"/>\r\n        <h3 className=\"text-center\">{artist.name}</h3>\r\n        <audio autoPlay controls src={preview}></audio>\r\n      </div>\r\n      <div className=\"col-md-4\">\r\n        <h4>Top Listened by you</h4>\r\n        <ol>\r\n          {my_ArtistTracks.map((track, index) => {\r\n            return (\r\n              <div key={`my_artist_${index}`} className={classes.MyArtistList}>\r\n                <li onClick={() => setPreview(track.preview_url)}>{track.name}</li>\r\n                <button className=\"btn btn-success\" onClick={(e) => handlePlaySong(e, index, my_ArtistTracks)}>Spotify</button>\r\n              </div>\r\n            )\r\n          })}\r\n        </ol>\r\n      </div>\r\n      <div className=\"col-md-4\">\r\n        <h4>Top Tracks</h4>\r\n        <ol>\r\n          {artistTopTracks.map((track, index) => {\r\n            return (\r\n              <div key={`my_artist_${index}`} className={classes.MyArtistList}>\r\n                <li onClick={() => setPreview(track.preview_url)}>{track.name}</li>\r\n                <button className=\"btn btn-success\" onClick={(e) => handlePlaySong(e, index, artistTopTracks)}>Spotify</button>\r\n              </div>\r\n            )\r\n          })}\r\n        </ol>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default withToast(ArtistDetails);\r\n","import React from 'react'\r\nimport classes from './style/Backdrop.module.css'\r\n\r\nconst Backdrop = ({ show, clicked }) => {\r\n  return show ? <div className={classes.Backdrop} onClick={clicked}></div> : null;\r\n}\r\n\r\nexport default Backdrop\r\n","import React from 'react';\r\nimport Backdrop from './Backdrop';\r\nimport classes from './style/Modal.module.css';\r\n\r\nconst Modal = ({ displayModal, children, hideModal }) => {\r\n  return (\r\n    <div>\r\n      <Backdrop show={displayModal} clicked={hideModal}/>\r\n      <div className={classes.Modal}\r\n        style={{\r\n          transform: displayModal\r\n            ? \"translateY(0)\"\r\n            : \"translateY(-100vh))\",\r\n          opacity: displayModal ? \"1\" : \"0\",\r\n          display: displayModal ? \"block\" : \"none\"\r\n        }}>\r\n        <i className={`fa fa-window-close ${classes.CloseButton}`} aria-hidden=\"true\" onClick={hideModal}></i>\r\n        {children}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Modal\r\n","import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport withToast from '../../hoc/withToast';\r\nimport ArtistList from './ArtistList';\r\nimport SelectedOption from './SelectedOption';\r\nimport AuthContext from '../../context/auth-context';\r\nimport ArtistDetails from './ArtistDetails';\r\nimport Spinner from '../Layout/Spinner';\r\nimport Modal from './Modal';\r\nimport classes from './style/TopArtists.module.css';\r\n\r\nclass TopArtists extends Component {\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tterm: \"short_term\",\r\n\t\t\tloading: false,\r\n\t\t\tmodalLoading: false,\r\n\t\t\tshowModal: false,\r\n\t\t\tsearchCompleted: false,\r\n\t\t\tartist_list: [],\r\n\t\t\tmyArtistDetails: {}\r\n\t\t}\r\n\t\tthis.token = sessionStorage.getItem('token');\r\n\t}\r\n\tstatic contextType = AuthContext;\r\n\tcomponentDidMount() {\r\n\t\tthis.setState({ loading: true });\r\n\t\tthis.fetchArtistList('short_term')\r\n\t}\r\n\tfetchArtistList = async (term) => {\r\n\t\ttry {\r\n\t\t\tlet res = await axios({\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\turl: 'https://api.spotify.com/v1/me/top/artists',\r\n\t\t\t\tparams: {\r\n\t\t\t\t\tlimit: 50,\r\n\t\t\t\t\ttime_range: term\r\n\t\t\t\t},\r\n\t\t\t\theaders: { 'Authorization': `Bearer ${this.token}` }\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tlet artist_list = [];\r\n\t\t\tartist_list = this.storeArtistList(res, artist_list);\r\n\r\n\t\t\tres = await axios({\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\turl: 'https://api.spotify.com/v1/me/top/artists',\r\n\t\t\t\tparams: {\r\n\t\t\t\t\tlimit: 50,\r\n\t\t\t\t\ttime_range: term,\r\n\t\t\t\t\toffset: 49\r\n\t\t\t\t},\r\n\t\t\t\theaders: { 'Authorization': `Bearer ${this.token}` }\r\n\t\t\t});\r\n\r\n\t\t\tartist_list = this.storeArtistList(res, artist_list, 50);\r\n\r\n\t\t\tthis.setState({ \r\n\t\t\t\tartist_list,\r\n\t\t\t\tloading: false\r\n\t\t\t});\r\n\r\n\t\t} catch (error) {\r\n\t\t\tthis.props.addToast(`${error.response.status}: ${error.response.data ? error.response.data.error.message : 'Error Encountered'}`, {\r\n\t\t\t\tappearance: 'error',\r\n\t\t\t\tautoDismiss: true\r\n\t\t\t});\r\n\t\t\t// Triggers when access token is expired\r\n\t\t\tif(error.response.status === 401){\r\n\t\t\t\tsessionStorage.clear();\r\n\t\t\t\tthis.context.updateAuth(false);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tstoreArtistList = (res, artistList, offset = 0) => {\r\n\t\tlet artistArray = artistList;\r\n\t\tlet data = res.data.items\r\n\t\tfor(let i = 0; i < data.length; i++){\r\n\t\t\tconst store = {\r\n\t\t\t\tkey: i + offset,\r\n\t\t\t\tname: data[i].name,\r\n\t\t\t\tid: data[i].id,\r\n\t\t\t\timages: data[i].images[1].url\r\n\t\t\t}\r\n\t\t\tartistArray.push(store);\r\n\t\t}\r\n\t\treturn artistArray;\r\n\t}\r\n\thandleOption = (e) => {\r\n\t\tthis.setState({ \r\n\t\t\tterm: e.target.value,\r\n\t\t\tloading: true,\r\n\t\t})\r\n\t\tthis.fetchArtistList(e.target.value);\r\n\t}\r\n\tfetchMyArtistTracks = async (clickedArtist) => {\r\n\t\ttry {\r\n      let res = await axios.get('https://api.spotify.com/v1/me/top/tracks', {\r\n\t\t\t\tparams: {\r\n\t\t\t\t\ttime_range: this.state.term,\r\n\t\t\t\t\tlimit: 50\r\n\t\t\t\t},\r\n\t\t\t\theaders: { 'Authorization': `Bearer ${this.token}` }\r\n\t\t\t});\r\n\r\n\t\t\tlet artistTracks = [];\r\n\t\t\tlet artistTopTracks = [];\r\n\t\t\tartistTracks = this.storeMyArtistTracks(res, artistTracks, clickedArtist);\r\n\r\n\t\t\tres = await axios.get('https://api.spotify.com/v1/me/top/tracks', {\r\n\t\t\t\tparams: {\r\n\t\t\t\t\ttime_range: this.state.term,\r\n\t\t\t\t\tlimit: 50,\r\n\t\t\t\t\toffset: 49\r\n\t\t\t\t},\r\n\t\t\t\theaders: { 'Authorization': `Bearer ${this.token}` }\r\n\t\t\t});\r\n\t\t\tartistTracks = this.storeMyArtistTracks(res, artistTracks, clickedArtist);\r\n\t\t\tartistTopTracks = await this.fetchArtistTopTracks(clickedArtist);\r\n\t\t\tthis.setState({\r\n\t\t\t\tmodalLoading: false,\r\n\t\t\t\tmyArtistDetails: {\r\n\t\t\t\t\tartist: clickedArtist,\r\n\t\t\t\t\tmy_ArtistTracks: artistTracks,\r\n\t\t\t\t\tartistTopTracks\r\n\t\t\t\t},\r\n\t\t\t\tsearchCompleted: true\r\n\t\t\t});\r\n    } catch (error) {\r\n      this.props.addToast(`${error.response.status}: ${error.response.data ? error.response.data.error.message : 'Error Encountered'}`, {\r\n\t\t\t\tappearance: 'error',\r\n\t\t\t\tautoDismiss: true\r\n\t\t\t});\r\n\t\t\t// Triggers when access token is expired\r\n\t\t\tif(error.response.status === 401){\r\n\t\t\t\tsessionStorage.clear();\r\n\t\t\t\tthis.context.updateAuth(false);\r\n\t\t\t}\r\n    }\r\n\t}\r\n\tstoreMyArtistTracks = (res, artistTracks, clickedArtist, offset = 0) => {\r\n\t\tconst data = res.data.items;\r\n\t\tlet artistArray = artistTracks;\r\n\t\tfor(let i = 0; i < data.length; i++){\r\n\t\t\tdata[i].artists.forEach(artist => {\r\n\t\t\t\tif(artist.name === clickedArtist.name){\r\n\t\t\t\t\tconst store = {\r\n\t\t\t\t\t\tname: data[i].name,\r\n\t\t\t\t\t\tpreview_url: data[i].preview_url,\r\n\t\t\t\t\t\turi: data[i].uri,\r\n\t\t\t\t\t}\r\n\t\t\t\t\tartistArray.push(store);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn artistArray;\r\n\t}\r\n\tfetchArtistTopTracks = async (artist) => {\r\n\t\ttry {\r\n\t\t\tconst res = await axios({\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\turl: `https://api.spotify.com/v1/artists/${artist.id}/top-tracks`,\r\n\t\t\t\tparams: { country : 'US' },\r\n\t\t\t\theaders: { 'Authorization': `Bearer ${this.token}` }\r\n\t\t\t});\r\n\t\t\tlet artistTracks = [];\r\n\t\t\tartistTracks = this.storeArtistTopTracks(res, artistTracks);\r\n\t\t\treturn artistTracks;\r\n\t\t} catch (error) {\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\tstoreArtistTopTracks(res, artistTracks, offset = 0){\r\n\t\tlet artistArray = artistTracks;\r\n\t\tconst data = res.data.tracks;\r\n\t\tfor(let i = 0; i < data.length; i++){\r\n\t\t\tconst store = {\r\n\t\t\t\tname: data[i].name,\r\n\t\t\t\tpreview_url: data[i].preview_url,\r\n\t\t\t\turi: data[i].uri\r\n\t\t\t}\r\n\t\t\tartistArray.push(store);\r\n\t\t}\r\n\t\treturn artistArray;\r\n\t}\r\n\thandleShowModal = async (clickedArtist) => {\r\n\t\tthis.setState({ \r\n\t\t\tshowModal: true,\r\n\t\t\tmodalLoading: true\r\n\t\t});\r\n\t\tthis.fetchMyArtistTracks(clickedArtist);\r\n\t}\r\n\thandleHideModal = () => this.setState({ showModal: false });\r\n\trender() {       \r\n\t\tconst {\r\n\t\t\tterm,\r\n\t\t\tloading,\r\n\t\t\tmodalLoading,\r\n\t\t\tartist_list,\r\n\t\t\tshowModal,\r\n\t\t\tmyArtistDetails,\r\n\t\t\tsearchCompleted\r\n\t\t} = this.state;\r\n\r\n\t\tif(loading) return <Spinner /> \r\n\r\n\t\treturn (\r\n\t\t\t<div className={classes.TopArtists}>\r\n\t\t\t\t<Modal displayModal={showModal} hideModal={this.handleHideModal}>\r\n\t\t\t\t\t{searchCompleted && <ArtistDetails loading={modalLoading} myArtist={myArtistDetails}/>}\r\n\t\t\t\t</Modal>\r\n\t\t\t\t<h1 className=\"text-center\">Top Artists</h1>\r\n\t\t\t\t<div className={`form-group ${classes.SelectedOption}`}>\r\n\t\t\t\t\t<p>View:</p>\r\n\t\t\t\t\t<SelectedOption term={term} onchange={this.handleOption} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<ArtistList term={term} artist_list={artist_list} showModal={this.handleShowModal}/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withToast(TopArtists);","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport Landing from './Landing/Landing';\r\nimport Profile from './Profile/Profile';\r\nimport Search from './Search/Search';\r\nimport TopTracks from './TopTracks/TopTracks';\r\nimport TopArtists from './TopArtists/TopArtists';\r\n\r\nconst Main = () => {\r\n    return (\r\n        <Switch>\r\n            <Route exact path=\"/react-spotifly\" component={Landing} />}/>\r\n            <Route exact path=\"/react-spotifly/profile\" component={Profile}></Route>\r\n            <Route exact path=\"/react-spotifly/search\" component={Search}></Route>\r\n            <Route exact path=\"/react-spotifly/top-tracks\" component={TopTracks}></Route>\r\n            <Route exact path=\"/react-spotifly/top-artists\" component={TopArtists}></Route>\r\n        </Switch>\r\n    );\r\n}\r\n\r\nexport default Main;","import React, { useContext } from 'react';\r\nimport { NavLink, withRouter } from 'react-router-dom';\r\nimport AuthContext from '../context/auth-context';\r\nimport './../style/Navbar.css';\r\n\r\nconst Navbar = ({ history }) => {\r\n\tconst authContext = useContext(AuthContext);\r\n\tconst handleLogOut = (e) => {\r\n\t\te.preventDefault();\r\n\t\tsessionStorage.clear();\r\n\t\tconst url = 'https://accounts.spotify.com/en/logout';\r\n\t\tconst spotifyLogoutWindow = window.open(url, 'Spotify Logout', 'width=700,height=500,top=40,left=40');\r\n\t\tsetTimeout(() => {\r\n\t\t\tspotifyLogoutWindow.close();\r\n\t\t\tsessionStorage.clear();\r\n\t\t\tauthContext.updateAuth(false)\r\n\t\t\thistory.push('/react-spotifly/');\r\n\t\t}, 2000);\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"navbar navbar-expand-lg navbar-dark bg-dark\">\r\n\t\t\t<span className=\"navbar-brand\">\r\n\t\t\t\t<NavLink exact to={`/react-spotifly`} className=\"nav-link\">Spotify Data Analyzer</NavLink>\r\n\t\t\t</span>\r\n\t\t\t<button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n\t\t\t\t\t<span className=\"navbar-toggler-icon\"></span>\r\n\t\t\t</button>\r\n\t\t\t<div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\r\n\t\t\t<ul className=\"navbar-nav ml-auto\" id=\"navbarSupportedContent\">\r\n\t\t\t\t<li className=\"nav-item\">\r\n\t\t\t\t\t<NavLink exact to={`/react-spotifly`} activeClassName=\"active\" className=\"nav-link\">Home</NavLink>\r\n\t\t\t\t</li>\r\n\t\t\t\t{/* <li className=\"nav-item\">\r\n\t\t\t\t\t\t<NavLink exact to={`/profile`} className=\"nav-link\">My Profile</NavLink>\r\n\t\t\t\t</li> */}\r\n\t\t\t\t<li className=\"nav-item\">\r\n\t\t\t\t\t<NavLink exact to={`/react-spotifly/search`} className=\"nav-link\">Search</NavLink>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li className=\"nav-item\">\r\n\t\t\t\t\t<NavLink exact to={`/react-spotifly/top-tracks`} className=\"nav-link\">Top Tracks</NavLink>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li className=\"nav-item\">\r\n\t\t\t\t\t<NavLink exact to={`/react-spotifly/top-artists`} className=\"nav-link\">Top Artists</NavLink>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li className=\"nav-item\">\r\n\t\t\t\t\t<a href=\"!#\" onClick={handleLogOut} className=\"nav-link\">Log Out</a>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default withRouter(Navbar);","import React, { Component } from 'react';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport Login from './Login';\r\nimport Main from './Main';\r\nimport Navbar from './Navbar';\r\nimport AuthContext from '../context/auth-context';\r\n\r\n\r\nclass App extends Component {\r\n\tconstructor(){\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\tloggedIn: false\r\n\t\t}\r\n\t}\r\n\tcomponentDidMount(){\r\n\t\tlet url = window.location.href;\r\n\t\tif(url.indexOf(\"token=\") > -1){ \r\n\t\t\tthis.authToken = url\r\n\t\t\t\t.split(\"token=\")[1]\r\n\t\t\t\t.split(\"&\")[0]\r\n\t\t\t\t.trim();\r\n\t\t\tsessionStorage.setItem('token', this.authToken);\r\n\t\t\tsessionStorage.setItem('loggedIn', this.state.loggedIn);\r\n\t\t\tthis.setState({\r\n\t\t\t\tloggedIn: true,\r\n\t\t\t});\r\n\t\t} else if (sessionStorage.getItem('loggedIn')) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tloggedIn: true,\r\n\t\t\t});\r\n\t\t}\t\r\n\t}\r\n\tupdateAuth = (received) => {\r\n\t\tconsole.log('finally');\r\n\t\tif(!received){\r\n\t\t\tthis.setState({ loggedIn: false });\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tconst { loggedIn } = this.state;\r\n\t\treturn (\r\n\t\t\t<AuthContext.Provider value={{ loggedIn: loggedIn, updateAuth: this.updateAuth }}>\r\n\t\t\t\t<Router>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{this.isLogin}\r\n\t\t\t\t\t\t{!loggedIn && \r\n\t\t\t\t\t\t<Login />}\r\n\t\t\t\t\t\t{loggedIn &&\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<Navbar />\r\n\t\t\t\t\t\t\t<Main />\r\n\t\t\t\t\t\t</div>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Router>\r\n\t\t\t</AuthContext.Provider>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/App';\r\nimport {BrowserRouter as Router} from 'react-router-dom';\r\nimport {ToastProvider} from 'react-toast-notifications';\r\n\r\n// import 'bootstrap/dist/css/bootstrap.min.css';\r\nimport './index.css';\r\n\r\nReactDOM.render(\r\n    <ToastProvider>\r\n        <Router basename={process.env.PUBLIC_URL}>\r\n            <App/>\r\n        </Router>\r\n    </ToastProvider>,\r\n    document.getElementById('root'));\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SearchFilter\":\"SearchFilter_SearchFilter__37MiW\",\"CardBody\":\"SearchFilter_CardBody__WYWEy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"AlbumDisplay\":\"ArtworkDisplay_AlbumDisplay__3uStn\",\"AlbumHeader\":\"ArtworkDisplay_AlbumHeader__2BqWC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Modal\":\"Modal_Modal__W1go6\",\"CloseButton\":\"Modal_CloseButton__2FjBP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TrackControl\":\"TrackControl_TrackControl__3dYDw\",\"TrackOrder\":\"TrackControl_TrackOrder__3nSSh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TopTracks\":\"TopTracks_TopTracks__2O-CQ\",\"TrackOption\":\"TopTracks_TrackOption__3osyZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Modal\":\"Modal_Modal__OzDGR\",\"CloseButton\":\"Modal_CloseButton__2ZY4z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SelectedOption\":\"TopArtists_SelectedOption__KyX9R\"};","module.exports = __webpack_public_path__ + \"static/media/react-logo.580ffd26.png\";","module.exports = __webpack_public_path__ + \"static/media/spinner.2f27f045.gif\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SearchForm\":\"SearchForm_SearchForm__3Wg0x\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Backdrop\":\"Backdrop_Backdrop__3WLjs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Pagination\":\"Pagination_Pagination__1worc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TracksDisplay\":\"TracksDisplay_TracksDisplay__jwPQs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TrackList\":\"TrackList_TrackList__2XV-T\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ArtistList\":\"ArtistList_ArtistList__AnUzZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Backdrop\":\"Backdrop_Backdrop__1m459\"};"],"sourceRoot":""}