(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){e.exports=a.p+"static/media/react-logo.580ffd26.png"},19:function(e,t,a){e.exports=a(48)},24:function(e,t,a){},26:function(e,t,a){},30:function(e,t,a){},32:function(e,t,a){},34:function(e,t,a){},36:function(e,t,a){},38:function(e,t,a){},43:function(e,t,a){},45:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(16),s=a.n(i),l=a(2),c=a(3),o=a(5),m=a(4),u=a(6),h=(a(24),a(17)),p=a.n(h),d=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container-login"},r.a.createElement("img",{className:"img-logo",src:p.a,alt:"Cannot be loaded"}),r.a.createElement("h1",{id:"react-app"},"Spotifly"),r.a.createElement("h5",null,"Step 1:- Click on the button below to sign in and authorize your account to use the app."),r.a.createElement("h5",null,"Step 2:- That's it!"),r.a.createElement("a",{href:"https://accounts.spotify.com/en/authorize/?client_id=".concat("54023f00676d404aa81cafd195a5b9f5","&response_type=token&redirect_uri=").concat("https://elvinlkw.github.io/react-spotifly/","&scope=").concat("user-read-private user-read-email user-library-read user-top-read user-read-recently-played user-read-currently-playing")},r.a.createElement("button",{className:"btn btn-success"},r.a.createElement("span",null,"Sign In !"))))}}]),t}(n.Component),v=a(52),f=a(49),k=a(11),g=a.n(k),y=(a(26),a(28),new g.a),E=function(e){function t(e){var a;Object(l.a)(this,t),a=Object(o.a)(this,Object(m.a)(t).call(this,e));var n=window.location.href;if(n.indexOf("token=")>-1)var r=n.split("token=")[1].split("&")[0].trim();return a.state={topTrack:"",topTrackArtwork:"",topTrackLoaded:!1,topArtist:"",topArtistArtwork:"",topArtistPreview:"",topArtistTrack:"",topPreviewLoaded:!1,favoriteGenres:{}},y.setAccessToken(r),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this;y.getMyTopTracks({time_range:"long_term",limit:50}).then(function(t){for(var a="",n=[],r=0;r<t.items.length;r++)n.push(t.items[r].id);for(var i=0;i<t.items[0].artists.length;i++)a.length>1?a+=", "+t.items[0].artists[i].name:a+=t.items[0].artists[i].name;return e.setState({topTrack:a+" - "+t.items[0].name,topTrackArtwork:t.items[0].album.images[1].url,topTrackPreview:t.items[0].preview_url,topTrackLoaded:!0}),n},function(e){alert("Data Could Not Be Retrieved!")}).then(function(e){y.getAudioFeaturesForTracks(e).then(function(e){for(var t=0,a=0,n=0,r=0,i=e.audio_features,s=0;s<i.length;s++)r+=i[s].tempo,t+=i[s].energy,a+=i[s].danceability,n+=i[s].valence;r/=i.length,t/=i.length,a/=i.length,n/=i.length,[].push(r,t,a,n)})}),y.getMyTopArtists({time_range:"long_term",limit:"1"}).then(function(t){return e.setState({topArtist:t.items[0].name,topArtistArtwork:t.items[0].images[1].url}),t.items[0].id}).then(function(t){y.getArtistTopTracks(t,"US").then(function(t){e.setState({topPreviewLoaded:!0,topArtistTrack:t.tracks[0].name,topArtistPreview:t.tracks[0].preview_url})})}),y.getMyTopArtists({time_range:"long_term",limit:"50"}).then(function(t){for(var a,n,r={},i=0;i<t.items.length;i++)for(var s=0;s<t.items[i].genres.length;s++)a=t.items[i].genres[s].split(/[ -]+/).join("_"),Object.keys(r).includes(a)?r[a]+=1:r[a]=1;n=e.sortResult(r),e.setState({favoriteGenres:n})})}},{key:"sortResult",value:function(e){var t={},a=[];for(var n in e)a.push([n,e[n]]);a.sort(function(e,t){return t[1]-e[1]});for(var r=0;r<=5;r++)t[a[r][0]]=Math.ceil(a[r][1]/50*100);return t}},{key:"handleStop",value:function(e){for(var t=function(e){document.getElementsByTagName("audio")[e].addEventListener("ended",function(){document.getElementsByTagName("i")[e].className="fa fa-play fa-2x"})},a=document.getElementsByTagName("audio"),n=0,r=a.length;n<r;n++)t(n),a[n]!==e.target&&(a[n].pause(),document.getElementsByTagName("i")[n].className="fa fa-play fa-2x")}},{key:"componentDidMount",value:function(){document.addEventListener("play",this.handleStop,!0)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("play",this.handleStop,!0)}},{key:"render",value:function(){var e=this,t=function(e){var t=document.getElementsByTagName("i")[e].className,a=document.getElementsByTagName("audio");t.includes("play")?(t=t.replace("play","pause"),a[e].play(),a[e].volume=.5):(t=t.replace("pause","play"),a[e].pause()),document.getElementsByTagName("i")[e].className=t};return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"container-current-top"},r.a.createElement("div",{className:"wrapper-top-header"},r.a.createElement("h1",{className:"text-center"},"All Time Top Track"),r.a.createElement("img",{alt:"Could Not Be Loaded",src:this.state.topTrackArtwork,className:"img-artwork"})),r.a.createElement("div",{className:"wrapper-top-preview"},r.a.createElement("h4",null,this.state.topTrack),this.state.topTrackLoaded&&this.state.topTrackPreview&&r.a.createElement("div",null,r.a.createElement("audio",{src:this.state.topTrackPreview}),r.a.createElement("i",{onClick:function(){return t(0)},className:"fa fa-play fa-2x"})),!this.state.topTrackPreview&&r.a.createElement("p",null,"No Preview Available"))),r.a.createElement("div",{className:"container-current-top"},r.a.createElement("div",{className:"wrapper-top-preview"},r.a.createElement("h4",null,this.state.topArtist),r.a.createElement("h6",{style:{textDecoration:"underline"}},"".concat(this.state.topArtist," - ").concat(this.state.topArtistTrack)),this.state.topPreviewLoaded&&this.state.topArtistPreview&&r.a.createElement("div",null,r.a.createElement("audio",{src:this.state.topArtistPreview}),r.a.createElement("i",{onClick:function(){return t(document.getElementsByTagName("audio").length-1)},className:"fa fa-play fa-2x"})),!this.state.topArtistPreview&&r.a.createElement("p",null,"No Preview Available")),r.a.createElement("div",{className:"wrapper-top-header"},r.a.createElement("h1",{className:"text-center"},"All Time Top Artist"),r.a.createElement("img",{alt:"Could Not Be Loaded",src:this.state.topArtistArtwork,className:"img-artwork"}))),r.a.createElement("div",{className:"container-favorite-genres"},r.a.createElement("h1",{className:"text-center"},"Favorite Genres"),r.a.createElement("h4",{className:"text-center"},"Your most played tracks include the following genres: "),r.a.createElement("div",null,Object.keys(this.state.favoriteGenres).map(function(t){return r.a.createElement("div",{key:t,className:"genres"},r.a.createElement("h4",{style:{width:"20%",textAlign:"center"}},t.split("_").join(" ").toUpperCase()),r.a.createElement("h4",null,"".concat(e.state.favoriteGenres[t],"%")),r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(e.state.favoriteGenres[t],"%")},"aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"})))}))))}}]),t}(n.Component),b=(a(30),new g.a),w=function(e){function t(e){var a;Object(l.a)(this,t),a=Object(o.a)(this,Object(m.a)(t).call(this,e));var n=window.location.href;if(n.indexOf("token=")>-1)var r=n.split("token=")[1].split("&")[0].trim();return a.state={profile_img:"",country:"",display_name:"",email:"",id:"",account_type:"",link:"",followers:0},b.setAccessToken(r),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this;b.getMe().then(function(t){try{e.setState({country:t.country,display_name:t.display_name,profile_img:t.images[0].url,email:t.email,followers:t.followers.total,account_type:t.product,id:t.id,link:t.external_urls.spotify})}catch(a){alert("Your Information Was Not Successfully Retrieved. Try refreshing the page!")}},function(){alert("Profile Data Could Not Be Fetched!")})}},{key:"render",value:function(){return r.a.createElement("div",{className:"container-profile"},r.a.createElement("img",{src:this.state.profile_img,alt:"Could Not Be Loaded"}),r.a.createElement("h4",null,r.a.createElement("strong",null,"Country: "),this.state.country),r.a.createElement("h4",null,r.a.createElement("strong",null,"Display Name: "),this.state.display_name),r.a.createElement("h4",null,r.a.createElement("strong",null,"Email: "),this.state.email),r.a.createElement("h4",null,r.a.createElement("strong",null,"ID: "),this.state.id),r.a.createElement("h4",null,r.a.createElement("strong",null,"Followers: "),this.state.followers),r.a.createElement("h4",null,r.a.createElement("strong",null,"Account Type: "),this.state.account_type),r.a.createElement("h4",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:this.state.link},"Link")))}}]),t}(n.Component),N=a(7),O=(a(32),a(34),function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.show?"modal display-block":"modal display-none";return r.a.createElement("div",{className:e},r.a.createElement("div",{className:"modal-main"},this.props.children))}}]),t}(n.Component)),T=new g.a,_=function(e){function t(){var e;Object(l.a)(this,t),e=Object(o.a)(this,Object(m.a)(t).call(this));var a=window.location.href;return a.indexOf("token=")>-1&&(e.token=a.split("token=")[1].split("&")[0].trim()),T.setAccessToken(e.token),e.state={track:[],album:[],tracklist:[],trackArtist:[],albumArtwork:"",releaseDate:"",duration:"",preview:"",selectedOption:"popularity",searchCompleted:!1,showTracklist:!1,show:!1,currentlyPlaying:null},e.handleSubmit=e.handleSubmit.bind(Object(N.a)(Object(N.a)(e))),e.handleOption=e.handleOption.bind(Object(N.a)(Object(N.a)(e))),e.hideModal=e.hideModal.bind(Object(N.a)(Object(N.a)(e))),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){this.refs.searchText.focus()}},{key:"componentDidMount",value:function(){document.addEventListener("play",this.handlePause,!0)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("play",this.handlePause,!0)}},{key:"sortArrayByDate",value:function(e,t){"date-desc"===t?e.sort(function(e,t){return new Date(t.release_date)-new Date(e.release_date)}):"date-asc"===t?e.sort(function(e,t){return new Date(e.release_date)-new Date(t.release_date)}):e.sort(function(e,t){return t.popularity-e.popularity});for(var a=0;a<e.length;a++)e[a].key=a;return e}},{key:"hideModal",value:function(e){e.preventDefault(),this.setState({tracklist:[],preview:"",show:!1,currentlyPlaying:null}),document.querySelector("audio").pause()}},{key:"handleSubmit",value:function(e,t){var a=this;e.preventDefault(),this.setState({searchCompleted:!1});var n=this.refs.searchText.value,r=[],i=[];n&&n.length>1&&(document.getElementById("header").innerHTML="Results: ".concat(n),T.search(n,["track","album"],{limit:50}).then(function(e){for(var n=e.albums,s=0,l=0;l<e.albums.items.length;l++)if("album"===n.items[l].album_type){var c={};c.key=s,c.artwork=n.items[l].images[1].url,c.artist=n.items[l].artists[0].name,c.album=n.items[l].name,c.release_date=n.items[l].release_date,c.url=n.items[l].href,i.push(c),s++}i=a.sortArrayByDate(i,"date-desc");for(var o=[],m=0;m<e.tracks.items.length;m++)o.push(a.getTrackDetails(m,e.tracks.items[m],r));Promise.all(o).then(function(){r=this.sortArrayByDate(r,t),this.setState({track:r,album:i,searchCompleted:!0})}.bind(a))}))}},{key:"getTrackDetails",value:function(e,t,a){return new Promise(function(n,r){var i={};if(i.key=e,i.popularity=t.popularity,i.release_date=t.album.release_date,i.artist=t.artists[0].name,i.id=t.album.id,i.track=t.name,i.artwork=t.album.images[1].url,i.preview=t.preview_url,null===t.preview_url){var s="".concat(t.album.href,"?access_token=").concat(this.token);fetch(s).then(function(e){return e.json()}).then(function(e){var t=e.tracks.items.filter(function(e){return e.name===i.track});t.length>0&&(i.preview=t[0].preview_url,a.push(i)),n()})}else a.push(i),n()}.bind(this))}},{key:"handlePause",value:function(e){for(var t=document.getElementsByClassName("track-preview"),a=document.getElementsByClassName("album-preview"),n=0,r=t.length;n<r;n++)t[n]!==e.target&&t[n].pause();for(var i=0,s=a.length;i<s;i++)a[i]!==e.target&&(a[i].pause(),document.getElementsByTagName("i")[i].className="fa fa-play-circle",document.getElementsByClassName("track-item")[i].style.color="black")}},{key:"handleOption",value:function(e){var t=e.target.value;this.setState({selectedOption:e.target.value}),this.handleSubmit(e,t)}},{key:"handleOpenTracklist",value:function(e,t){var a,n=this,r="".concat(e,"?access_token=").concat(this.token),i=[],s=0;fetch(r).then(function(e){return e.json()}).then(function(e){for(var r=0;r<e.tracks.items.length;r++){var l={};l.key=r,l.tracklist=e.tracks.items[r].name,l.preview=e.tracks.items[r].preview_url,s+=e.tracks.items[r].duration_ms,i.push(l)}if(s<36e5){var c=Math.floor(s/1e3%60),o=Math.floor(s/6e4);a="".concat(o," min ").concat(c,"s")}else{var m=Math.floor(s/6e4%60),u=Math.floor(s/36e5%24);a="".concat(u," hours ").concat(m," min")}n.setState({tracklist:i,trackArtist:[e.artists[0].name,e.name],albumArtwork:e.images[1].url,releaseDate:t,duration:a,show:!0,isAlbumPlaying:!1})})}},{key:"playTrack",value:function(e,t){var a=document.querySelector("audio"),n=document.querySelectorAll("i")[e].className,r=document.querySelectorAll(".track-item")[e];if(null!==this.state.currentlyPlaying){var i=document.querySelectorAll("i")[this.state.currentlyPlaying].className;i=i.replace("pause","play"),a.pause(),document.getElementsByClassName("track-item")[this.state.currentlyPlaying].style.color="black"}var s=a.play();n.includes("play")?(n=n.replace("play","pause"),void 0!==s&&s.then(function(e){}).catch(function(e){}),r.style.color="red"):(n=n.replace("pause","play"),a.pause(),r.style.color="black"),document.getElementsByTagName("i")[e].className=n,this.setState({preview:t,currentlyPlaying:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"search-container"},r.a.createElement("h1",{id:"header",className:"text-center"},"Search"),r.a.createElement("form",{className:"text-center",onSubmit:function(t){return e.handleSubmit(t,e.state.selectedOption)}},r.a.createElement("input",{placeholder:"Search",type:"text",className:"form-control",ref:"searchText"}),r.a.createElement("button",{type:"button",className:"btn btn-info"},"Let's Get It!")),this.state.searchCompleted&&this.state.track.length>0&&r.a.createElement("div",{className:"search-result"},r.a.createElement("div",null,r.a.createElement("h1",{className:"text-center"},"Albums"),r.a.createElement("div",{id:"album-container"},r.a.createElement(O,{show:this.state.show},r.a.createElement("div",{className:"artwork-container"},r.a.createElement("img",{className:"track-artwork",src:this.state.albumArtwork,alt:"not available"}),r.a.createElement("div",{className:"track-info"},r.a.createElement("h2",null,this.state.trackArtist[1]),r.a.createElement("hr",null),r.a.createElement("p",null,"By ",this.state.trackArtist[0]),r.a.createElement("p",null,this.state.releaseDate),r.a.createElement("p",null,this.state.tracklist.length," Songs - ",this.state.duration),r.a.createElement("audio",{autoPlay:!0,controls:!0,src:this.state.preview}))),r.a.createElement("div",{className:"track-list-container"},r.a.createElement("h1",null,"Tracklist"),r.a.createElement("ol",null,this.state.tracklist.map(function(t){return r.a.createElement("div",{className:"track-item-container",key:t.key,onClick:function(){return e.playTrack(t.key,t.preview)}},r.a.createElement("li",{className:"track-item"},r.a.createElement("i",{className:"fa fa-play-circle"}),"".concat(t.tracklist)))}))),r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-window-close modal-close-button",onClick:this.hideModal}))),this.state.album.map(function(t){return r.a.createElement("div",{key:t.key,style:{margin:"2rem 1rem"}},r.a.createElement("img",{onClick:function(){return e.handleOpenTracklist(t.url,t.release_date)},className:"image-artwork",alt:"NoPreview",src:t.artwork}),r.a.createElement("h6",{style:{paddingTop:"10px",fontWeight:"bold"},className:"text-center"},t.artist),r.a.createElement("h6",{className:"text-center",style:{fontWeight:"bold"}},t.album))}))),r.a.createElement("div",null,r.a.createElement("h1",{className:"text-center"},"Tracks"),r.a.createElement("div",{className:"form-group"},r.a.createElement("p",null,"Sort By:"),r.a.createElement("select",{className:"form-control",value:this.state.selectedOption,onChange:this.handleOption},r.a.createElement("option",{value:"popularity"},"Popularity"),r.a.createElement("option",{value:"date-desc"},"Newest First"),r.a.createElement("option",{value:"date-asc"},"Oldest First"))),r.a.createElement("div",{style:{position:"relative",display:"flex",flexFlow:"row wrap",justifyContent:"space-around",padding:"0 2rem"}},this.state.track.map(function(e,t){return r.a.createElement("div",{key:t,style:{margin:"2rem 1rem"}},r.a.createElement("audio",{className:"track-preview",src:e.preview}),r.a.createElement("img",{className:"image-artwork",onClick:function(){return function(e,t){if(t){var a=document.getElementsByTagName("audio");a[e].play(),a[e].volume=.5}else alert("No Preview Found.")}(t,e.preview)},alt:"NoPreview",src:e.artwork}),r.a.createElement("h6",{style:{paddingTop:"10px"},className:"text-center"},e.artist),r.a.createElement("h6",{className:"text-center"},e.track))})))),this.state.searchCompleted&&0===this.state.track.length&&r.a.createElement("h1",{className:"text-center"},"No Result Found"))}}]),t}(n.Component),j=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(o.a)(this,Object(m.a)(t).call(this))).state={itemList:[],dataValid:!1,songFocus:!1,image_src:"",track:"",preview:""},e.getTrackInfo=e.getTrackInfo.bind(Object(N.a)(Object(N.a)(e))),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"getTrackInfo",value:function(e,t,a){return new Promise(function(n,r){for(var i={},s="",l=0;l<t.artists.length;l++)s.length>1?s+=", "+t.artists[l].name:s+=t.artists[l].name;if(i.key=e,i.value=s+" - "+t.name,i.preview=t.preview_url,i.image=t.album.images[0].url,null===t.preview_url){var c="".concat(t.album.href,"?access_token=").concat(this.token);fetch(c).then(function(e){return e.json()}).then(function(e){})}a.push(i)}.bind(this))}},{key:"handleClick",value:function(e,t){this.setState({songFocus:!0,image_src:this.state.itemList[e].image,preview:this.state.itemList[e].preview,track:t})}},{key:"componentWillMount",value:function(){var e=this,t=this.props.spotifyApi,a=[];t.getMyTopTracks({limit:50,time_range:"short_term"}).then(function(t){for(var n=[],r=0;r<t.items.length;r++)n.push(e.getTrackInfo(r,t.items[r],a));Promise.all(n).then(function(){})},function(e){alert("Error: Could Not Retrieve Data From Server")}).then(function(){t.getMyTopTracks({limit:50,time_range:"short_term",offset:"49"}).then(function(t){for(var n=1;n<t.items.length;n++){for(var r={},i="",s=0;s<t.items[n].artists.length;s++)i.length>1?i+=", "+t.items[n].artists[s].name:i+=t.items[n].artists[s].name;r.key=n+49,r.value=i+" - "+t.items[n].name,r.preview=t.items[n].preview_url,r.image=t.items[n].album.images[0].url,a.push(r)}e.setState({itemList:a,dataValid:!0})})})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("p",{style:{fontWeight:"bold"}},"Short Term (4 weeks)"),r.a.createElement("div",{className:"track-container"},r.a.createElement("ol",null,this.state.dataValid&&this.state.itemList.map(function(t){return r.a.createElement("li",{className:"track-list",key:t.key,onClick:function(){return e.handleClick(t.key,t.value)}}," ".concat(t.value))})))),r.a.createElement("div",{className:"col-lg-8"},this.state.dataValid&&this.state.songFocus&&r.a.createElement("div",{className:"image-container"},r.a.createElement("img",{className:"track-img",src:this.state.image_src,alt:""}),r.a.createElement("div",null,r.a.createElement("p",null,this.state.track),r.a.createElement("audio",{controls:!0,autoPlay:!0,src:this.state.preview})))))}}]),t}(n.Component),A=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(o.a)(this,Object(m.a)(t).call(this))).state={itemList:[],dataValid:!1,songFocus:!1,image_src:"",track:"",preview:""},e.getTrackInfo=e.getTrackInfo.bind(Object(N.a)(Object(N.a)(e))),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"getTrackInfo",value:function(e,t,a){return new Promise(function(n,r){for(var i={},s="",l=0;l<t.artists.length;l++)s.length>1?s+=", "+t.artists[l].name:s+=t.artists[l].name;if(i.key=e,i.value=s+" - "+t.name,i.preview=t.preview_url,i.image=t.album.images[0].url,null===t.preview_url){var c="".concat(t.album.href,"?access_token=").concat(this.token);fetch(c).then(function(e){return e.json()}).then(function(e){console.log(e)})}a.push(i)}.bind(this))}},{key:"handleClick",value:function(e,t){this.setState({songFocus:!0,image_src:this.state.itemList[e].image,preview:this.state.itemList[e].preview,track:t}),console.log(this.state.itemList[e].image)}},{key:"componentWillMount",value:function(){var e=this,t=this.props.spotifyApi,a=[];t.getMyTopTracks({limit:50,time_range:"medium_term"}).then(function(t){for(var n=[],r=0;r<t.items.length;r++)n.push(e.getTrackInfo(r,t.items[r],a));Promise.all(n).then(function(){})},function(e){alert("Error: Could Not Retrieve Data From Server")}).then(function(){console.log(a),t.getMyTopTracks({limit:50,time_range:"medium_term",offset:"49"}).then(function(t){for(var n=1;n<t.items.length;n++){for(var r={},i="",s=0;s<t.items[n].artists.length;s++)i.length>1?i+=", "+t.items[n].artists[s].name:i+=t.items[n].artists[s].name;r.key=n+49,r.value=i+" - "+t.items[n].name,r.preview=t.items[n].preview_url,r.image=t.items[n].album.images[0].url,a.push(r)}e.setState({itemList:a,dataValid:!0})})})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("p",{style:{fontWeight:"bold"}},"6 Months"),r.a.createElement("div",{className:"track-container"},r.a.createElement("ol",null,this.state.dataValid&&this.state.itemList.map(function(t){return r.a.createElement("li",{className:"track-list",key:t.key,onClick:function(){return e.handleClick(t.key,t.value)}}," ".concat(t.value))})))),r.a.createElement("div",{className:"col-lg-8"},this.state.dataValid&&this.state.songFocus&&r.a.createElement("div",{className:"image-container"},r.a.createElement("img",{className:"track-img",src:this.state.image_src,alt:""}),r.a.createElement("div",null,r.a.createElement("p",null,this.state.track),r.a.createElement("audio",{controls:!0,autoPlay:!0,src:this.state.preview},"Your browser does not support the audio player.")))))}}]),t}(n.Component),C=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={itemList:[],dataValid:!1,songFocus:!1,image_src:"",track:"",preview:""},a.getTrackInfo=a.getTrackInfo.bind(Object(N.a)(Object(N.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"getTrackInfo",value:function(e,t,a){return new Promise(function(n,r){for(var i={},s="",l=0;l<t.artists.length;l++)s.length>1?s+=", "+t.artists[l].name:s+=t.artists[l].name;if(i.key=e,i.value=s+" - "+t.name,i.preview=t.preview_url,i.image=t.album.images[0].url,null===t.preview_url){var c="".concat(t.album.href,"?access_token=").concat(this.token);fetch(c).then(function(e){return e.json()}).then(function(e){console.log(e)})}a.push(i)}.bind(this))}},{key:"componentWillMount",value:function(){var e=this,t=this.props.spotifyApi,a=[];t.getMyTopTracks({limit:50,time_range:"long_term"}).then(function(t){var n=[];console.log(t.items[1]);for(var r=0;r<t.items.length;r++)n.push(e.getTrackInfo(r,t.items[r],a));Promise.all(n).then(function(){})},function(e){alert("Error: Could Not Retrieve Data From Server")}).then(function(){t.getMyTopTracks({limit:50,time_range:"long_term",offset:"49"}).then(function(t){for(var n=1;n<t.items.length;n++){for(var r={},i="",s=0;s<t.items[n].artists.length;s++)i.length>1?i+=", "+t.items[n].artists[s].name:i+=t.items[n].artists[s].name;r.key=n+49,r.value=i+" - "+t.items[n].name,r.preview=t.items[n].preview_url,r.image=t.items[n].album.images[0].url,a.push(r)}e.setState({itemList:a,dataValid:!0})})})}},{key:"handleClick",value:function(e,t){this.setState({songFocus:!0,image_src:this.state.itemList[e].image,preview:this.state.itemList[e].preview,track:t})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("p",{style:{fontWeight:"bold"}},"All Time"),r.a.createElement("div",{className:"track-container"},r.a.createElement("ol",null,this.state.dataValid&&this.state.itemList.map(function(t){return r.a.createElement("li",{className:"track-list",key:t.key,onClick:function(){return e.handleClick(t.key,t.value)}}," ".concat(t.value))})))),r.a.createElement("div",{className:"col-lg-8"},this.state.dataValid&&this.state.songFocus&&r.a.createElement("div",{className:"image-container"},r.a.createElement("img",{className:"track-img",src:this.state.image_src,alt:""}),r.a.createElement("div",null,r.a.createElement("p",null,this.state.track),r.a.createElement("audio",{controls:!0,autoPlay:!0,src:this.state.preview})))))}}]),t}(n.Component),x=(a(36),new g.a),S=function(e){function t(){var e;Object(l.a)(this,t),e=Object(o.a)(this,Object(m.a)(t).call(this));var a=window.location.href;return e.state={term:"sh-term"},a.indexOf("token=")>-1&&(e.token=a.split("token=")[1].split("&")[0].trim()),x.setAccessToken(e.token),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleOption",value:function(e){this.setState({term:e.target.value})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"top-track-container"},r.a.createElement("h1",{className:"text-center"},"Top Tracks"),r.a.createElement("div",{className:"form-group"},r.a.createElement("p",null,"View:"),r.a.createElement("select",{className:"form-control",value:this.state.term,onChange:function(t){return e.handleOption(t)}},r.a.createElement("option",{value:"sh-term"},"4 Weeks"),r.a.createElement("option",{value:"md-term"},"6 Months"),r.a.createElement("option",{value:"lg-term"},"All Time"))),r.a.createElement("div",{className:"top-tracks-wrapper row"},"sh-term"===this.state.term&&r.a.createElement(j,{spotifyApi:x,token:this.token}),"md-term"===this.state.term&&r.a.createElement(A,{spotifyApi:x,token:this.token}),"lg-term"===this.state.term&&r.a.createElement(C,{spotifyApi:x,token:this.token})))}}]),t}(n.Component),L=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={itemList:[],dataValid:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.spotifyApi,a=[];t.getMyTopArtists({limit:50,time_range:"short_term"}).then(function(e){for(var t=0;t<e.items.length;t++){var n={};n.key=t+1,n.value=e.items[t].name,a.push(n)}},function(e){alert("Error: Data could not be fetched!")}).then(function(){t.getMyTopArtists({limit:50,time_range:"short_term",offset:"49"}).then(function(t){for(var n=1;n<t.items.length;n++){var r={};r.key=n+50,r.value=t.items[n].name,a.push(r)}e.setState({itemList:a,dataValid:!0})})})}},{key:"render",value:function(){return r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("p",{style:{fontWeight:"bold"}},"Short Term (4 Weeks)"),r.a.createElement("ol",{className:"artist-list"},this.state.dataValid&&this.state.itemList.map(function(e){return r.a.createElement("li",{key:e.key},e.value)})))}}]),t}(n.Component),M=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={itemList:[],dataValid:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.spotifyApi,a=[];t.getMyTopArtists({limit:50,time_range:"medium_term"}).then(function(e){for(var t=0;t<e.items.length;t++){var n={};n.key=t+1,n.value=e.items[t].name,a.push(n)}},function(e){alert("Error: Data could not be fetched!")}).then(function(){t.getMyTopArtists({limit:50,time_range:"medium_term",offset:"49"}).then(function(t){for(var n=1;n<t.items.length;n++){var r={};r.key=n+50,r.value=t.items[n].name,a.push(r)}e.setState({itemList:a,dataValid:!0})})})}},{key:"render",value:function(){return r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("p",{style:{fontWeight:"bold"}},"Medium Term (Approximately 6 Months)"),r.a.createElement("ol",{className:"artist-list"},this.state.dataValid&&this.state.itemList.map(function(e){return r.a.createElement("li",{key:e.key},e.value)})))}}]),t}(n.Component),P=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={itemList:[],dataValid:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.spotifyApi,a=[];t.getMyTopArtists({limit:50,time_range:"long_term"}).then(function(e){for(var t=0;t<e.items.length;t++){var n={};n.key=t+1,n.value=e.items[t].name,a.push(n)}},function(e){alert("Error: Data could not be fetched!")}).then(function(){t.getMyTopArtists({limit:50,time_range:"long_term",offset:"49"}).then(function(t){for(var n=1;n<t.items.length;n++){var r={};r.key=n+50,r.value=t.items[n].name,a.push(r)}e.setState({itemList:a,dataValid:!0})})})}},{key:"render",value:function(){return r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("p",{style:{fontWeight:"bold"}},"Long Term (All Time)"),r.a.createElement("ol",{className:"artist-list"},this.state.dataValid&&this.state.itemList.map(function(e){return r.a.createElement("li",{key:e.key},e.value)})))}}]),t}(n.Component),B=(a(38),new g.a),D=function(e){function t(){var e;Object(l.a)(this,t),e=Object(o.a)(this,Object(m.a)(t).call(this));var a=window.location.href.split("token=")[1].split("&")[0].trim();return B.setAccessToken(a),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"top-artists-container"},r.a.createElement("h1",{className:"text-center"},"Top Artists"),r.a.createElement("div",{className:"row",style:{width:"100vw",overflowX:"hidden"}},r.a.createElement(L,{spotifyApi:B}),r.a.createElement(M,{spotifyApi:B}),r.a.createElement(P,{spotifyApi:B})))}}]),t}(n.Component),F=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(v.a,null,r.a.createElement(f.a,{exact:!0,path:"/",component:E}),r.a.createElement(f.a,{exact:!0,path:"/profile",component:w}),r.a.createElement(f.a,{exact:!0,path:"/search",component:_}),r.a.createElement(f.a,{exact:!0,path:"/top-tracks",component:S}),r.a.createElement(f.a,{exact:!0,path:"/top-artists",component:D}))}}]),t}(n.Component),I=a(51),V=(a(43),function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.token;return r.a.createElement("div",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement("span",{className:"navbar-brand"},r.a.createElement(I.a,{exact:!0,to:"/#access_token=".concat(e,"&token_type=Bearer&expires_in=3600"),className:"nav-link"},"Spotifly")),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav ml-auto",id:"navbarSupportedContent"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(I.a,{exact:!0,to:"/#access_token=".concat(e,"&token_type=Bearer&expires_in=3600"),activeClassName:"active",className:"nav-link"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(I.a,{exact:!0,to:"/profile#access_token=".concat(e,"&token_type=Bearer&expires_in=3600"),className:"nav-link"},"My Profile")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(I.a,{exact:!0,to:"/search#access_token=".concat(e,"&token_type=Bearer&expires_in=3600"),className:"nav-link"},"Search")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(I.a,{exact:!0,to:"/top-tracks#access_token=".concat(e,"&token_type=Bearer&expires_in=3600"),className:"nav-link"},"Top Tracks")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(I.a,{exact:!0,to:"/top-artists#access_token=".concat(e,"&token_type=Bearer&expires_in=3600"),className:"nav-link"},"Top Artists")))))}}]),t}(n.Component)),W=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(o.a)(this,Object(m.a)(t).call(this))).state={loggedIn:!1},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=window.location.href;e.indexOf("token=")>-1&&(this.authToken=e.split("token=")[1].split("&")[0].trim(),this.setState({loggedIn:!0}))}},{key:"render",value:function(){return r.a.createElement("div",null,!this.state.loggedIn&&r.a.createElement(d,null),this.state.loggedIn&&r.a.createElement("div",null,r.a.createElement(V,{token:this.authToken}),r.a.createElement(F,{token:this.authToken})))}}]),t}(n.Component),R=a(50);a(45);s.a.render(r.a.createElement(R.a,{basename:"/react-spotifly"},r.a.createElement(W,null)),document.getElementById("root"))}},[[19,2,1]]]);
//# sourceMappingURL=main.b612df8f.chunk.js.map